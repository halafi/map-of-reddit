{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/SmallPreview.vue?ffd4","webpack:///./src/components/Typeahead.vue?b7d0","webpack:///./src/App.vue?d019","webpack:///./src/lib/bus.js","webpack:///./src/lib/utils.js","webpack:///./src/lib/createSVGLoader.js","webpack:///./src/lib/PointCollection.js","webpack:///./src/lib/PolyLineCollection.js","webpack:///./src/lib/MSDFTextCollection.js","webpack:///./src/lib/createFuzzySearcher.js","webpack:///./src/appState.js","webpack:///./src/lib/constants.js","webpack:///./src/lib/LineCollection.js","webpack:///./src/lib/createPointerEventsHandler.js","webpack:///./src/lib/createSubgraphVisualizer.js","webpack:///./src/lib/createSceneLayerManager.js","webpack:///./src/lib/createStreamingSVGRenderer.js","webpack:///./src/Tooltip.vue?da94","webpack:///./src/lib/clickOutside.js","webpack:///src/Tooltip.vue","webpack:///./src/Tooltip.vue?d781","webpack:///./src/Tooltip.vue","webpack:///./src/components/Typeahead.vue?352e","webpack:///src/components/Typeahead.vue","webpack:///./src/components/Typeahead.vue?673d","webpack:///./src/components/Typeahead.vue","webpack:///./src/components/Sidebar.vue?f6ec","webpack:///src/components/Sidebar.vue","webpack:///./src/components/Sidebar.vue?6485","webpack:///./src/components/Sidebar.vue","webpack:///./src/components/ImproveWindow.vue?e0fc","webpack:///src/components/ImproveWindow.vue","webpack:///./src/components/ImproveWindow.vue?4cda","webpack:///./src/components/ImproveWindow.vue","webpack:///./src/SmallPreview.vue?c09b","webpack:///./src/LoadingIcon.vue?c7fe","webpack:///./src/LoadingIcon.vue","webpack:///src/SmallPreview.vue","webpack:///./src/SmallPreview.vue?9cf5","webpack:///./src/SmallPreview.vue","webpack:///./src/lib/createFirstInteractionListener.js","webpack:///src/App.vue","webpack:///./src/App.vue?c53a","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?995e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","isWebGLEnabled","_e","_m","staticClass","_v","_s","progressMessage","on","$event","preventDefault","onSubgraphRootClick","subgraphName","onExitSubgraph","subreddit","onDeclineAge","slot","showRelated","graphLoaded","onSubmit","appState","query","sidebarVisible","findSubreddit","closeSubredditOnSmallScreen","closeSubredditViewer","onTypeAheadInput","onImproveClick","smallPreview","improveVisible","style","left","tooltip","x","top","y","onBackdropClick","staticRenderFns","bus","eventify","setProgress","msg","fire","debounce","cb","ms","self","handle","lastCall","Date","time","elapsed","clearTimeout","arguments","setTimeout","formatNumber","toString","replace","createSVGLoader","url","disposed","graph","createGraph","parseSVGAsync","createStreamingSVGParser","notifyTagOpen","notifyTagClose","api","load","dispose","getGraph","start","performance","now","getLinksCount","message","getLinkCount","getPathTo","indexOf","baseUrl","URL","pathname","substr","lastIndexOf","fetch","then","response","fetchReader","body","getReader","decoder","TextDecoder","read","processData","progress","chunk","undefined","decode","stream","done","console","log","text","txt","labels","split","forEach","label","addNode","fromId","prevBuffer","weight","Error","mapLoaded","tmp","Uint8Array","byteLength","set","lastAvailableByte","Math","floor","view","DataView","buffer","linkId","getInt32","toId","addLink","element","PointCollection","gl","program","defineProgram","vertex","fragment","attributes","color","ColorAttribute","instanced","point","InstancedAttribute","preDrawHook","postDrawHook","opacity","uniforms","modelViewProjection","draw","setCount","GLCollection","PolyLineCollection","options","debug","polygon","flat","triangles","earcut","index","add","MSDFTextCollection","getExtension","getTextProgram","img","msdfImage","Image","crossOrigin","isReady","queue","fontSize","fontInfo","fontPath","json","alphabet","Map","chars","char","charValue","String","fromCharCode","id","onload","_sdfTextureChanged","setTextureCanvas","sdfTextureWidth","width","sdfTextureHeight","height","q","addText","src","bias","dy","b","lineCount","line","textInfo","z","dx","limit","w","sdfPos","xadvance","info","size","scale","cx","cy","position","yoffset","charSize","texturePosition","error","scene","renderFrame","capacity","fuzzysort","require","createFuzzySearcher","words","addWord","find","word","promise","goAsync","results","map","html","highlight","target","pendingSave","qs","state","instance","useSearch","userTypedSomething","getFilePath","saveQuery","newQuery","unset","getQueryState","getCameraPosition","coordinates","v","Number","parseFloat","isFinite","filter","saveScenePosition","dc","getDrawContext","Colors","PRIMARY_HIGHLIGHT_COLOR","SECONDARY_HIGHLIGHT_COLOR","TERNARY_COLOR","TERNARY_LINK","LayerLevels","Polygons","Edges","HighlightedEdges","Nodes","Text","NamedGroups","MainGraph","LineCollection","createPointerEventsHandler","sceneLayerManager","spatialIdex","RBush","moved","isPaused","getScene","handleClick","handleMove","handleTransform","highlightedNodes","getGL","firstLevelArrows","secondLevelArrows","addToLayer","elementsGroupName","addToNamedGroup","clearHighlights","focusUI","setPaused","cameraZPosition","min","max","onTransform","clear","ui","getHighlightedLinks","linkUI","links","isFirstLevel","getHighlightedNodes","nodeUI","insert","minX","minY","maxX","maxY","removeChild","off","e","findNearest","newIsPaused","originalEvent","clientX","clientY","neighborIds","knn","neighbor","uiX","uiY","dist","hypot","createLayout","Easing","easeInQuart","createSubgraphVisualizer","subgraph","viewBox","nodeNameToUI","layout","raf","MAX_FRAMES","renderCount","ourNodeNameToUI","points","TextCollection","transitionAnimator","createTransitionAnimator","pointerEvents","focusSubgraphNode","run","hlNode","nodeUIs","forEachLinkedNode","other","linkUIs","forEachLink","link","from","to","onSceneIsBack","cancelAnimationFrame","parent","startSceneRestoration","startFadeOut","beginLayout","timeStep","springLength","springCoefficient","gravity","nodeMass","nodeId","sqrt","rememberAndSetOriginalPositions","requestAnimationFrame","frame","step","updateNodePositions","finishRendering","setViewBox","getBoundingRect","getRootNodeId","root","forEachNode","node","isRoot","getNodePosition","rootNode","subgraphDone","boundingRect","Infinity","right","bottom","pos","update","copyPosition","ourUI","setNodePosition","durationInFrames","zoomOutViewBox","currentStep","zoomStart","zoomEnd","changeRectangleFinishedCallback","doneCallback","positions","startZoomOut","startZoomIn","getCurrentBoundingRectangle","changeRectangle","side","tan","fov","pixelRatio","getNamedGroup","elements","el","hideNamedGroup","current","nodeCollections","immediate","restoreNamedGroup","fadeIn","lerp","createSceneLayerManager","namedGroups","groupName","group","isHidden","layer","layerIndex","rootElement","getRoot","lastElementWithLowerLayerIndex","children","warn","insertChildAfter","appendChild","createStreamingSVGRenderer","canvas","ignoreSVGViewBox","initScene","fuzzySearcher","loader","subgraphVisualizer","persistedName","nodes","boundariesFill","currentTransform","createTransformParser","nodesByComponent","complimentaryColor","clusterColors","setProgressDebounced","focusNode","unfocus","exitSubgraphMode","loadSVG","focus","neighbors","componentId","has","idx","maxLinks","secondaryLinkColor","neighborId","subgraphNodes","Set","addNeighbors","neighborsSet","otherNode","runSubGraphVisualizer","Array","addedNode","getNode","isFirstChild","hasLink","isRootLevel","nodeName","path","handleElementStart","handleElementEnd","tagName","viewBoxArr","finiteNumber","addBorder","transform","pushTransform","popTransform","getNumericAttribute","transformY","getTextAttribute","getLoadedSubreddits","parseBorder","addPolygon","clusterId","getComplimentaryColor","lightningFactor","alpha","g","rgbToHsl","h","hslToRgb","r0","g0","b0","hue2rgb","round","createScene","allowPinchRotation","maxZoom","minZoom","setClearColor","cameraPosition","getCamera","initialSceneSize","getPointsFromPathData","x0","y0","hexColor","getElementFillColor","isDirty","tx","ty","transformStack","transformStr","parseTransform","pop","str","transformNumbers","match","coefficients","updateTransform","record","rgbArray","startClick","props","methods","component","directives","rawName","expression","menuClicked","ref","placeholder","domProps","currentQuery","handleInput","cycleTheList","showClearButton","clearSearch","_l","suggestion","class","selected","pickSuggestion","loadingError","nodeList","ctx","seed","createDocumentHandler","binding","vnode","mouseup","mousedown","context","contains","popperElm","methodName","bindingFn","document","addEventListener","documentHandler","unbind","len","default","delay","currentSelected","showSuggestions","showLoading","suggestions","watch","refresh","getSuggestionsInternal","$emit","hideSuggestions","pendingKeyToShow","showIfNeeded","visible","$refs","input","payload","shouldProceed","event","previous","isArray","items","which","onClose","mounted","handleKeyDown","beforeDestroy","removeEventListener","showFullPreview","details","subscribers","active","image","icon","description","script","components","LoadingIcon","loading","getSubredditInfo","fetchedName","createFirstInteractionListener","callback","handleFirstEvent","called","Tooltip","Typeahead","Subreddit","Sidebar","ImproveWindow","SmallPreview","isSmallScreen","typeaheadChanged","showTooltip","showSubreddit","forceFullView","disposeFirstListener","subgraphVisualized","svgRenderer","innerWidth","Vue","config","productionTip","render","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,GAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,2ECvJT,W,oCCAA,W,mGCAI,EAAS,WAAa,IAAIyC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,QAAQ,CAAGN,EAAIO,eAAsCP,EAAIQ,KAA1BJ,EAAG,MAAM,CAACJ,EAAIS,GAAG,KAAeT,EAAkB,eAAEI,EAAG,MAAM,CAACA,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,SAAS,CAAEN,EAAmB,gBAAEI,EAAG,MAAM,CAACM,YAAY,YAAY,CAACV,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIa,oBAAoBb,EAAIQ,OAAOJ,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,SAAS,CAAEN,EAAgB,aAAEI,EAAG,MAAM,CAACM,YAAY,qBAAqB,CAACV,EAAIW,GAAG,UAAUP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIiB,oBAAoBF,MAAW,CAACf,EAAIW,GAAG,MAAMX,EAAIY,GAAGZ,EAAIkB,iBAAiBlB,EAAIW,GAAG,mCAAmCP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAImB,eAAeJ,MAAW,CAACf,EAAIW,GAAG,gBAAgBX,EAAIQ,OAAQR,EAAa,UAAEI,EAAG,YAAY,CAACM,YAAY,UAAUJ,MAAM,CAAC,KAAON,EAAIoB,WAAWN,GAAG,CAAC,WAAad,EAAIqB,eAAe,CAACjB,EAAG,WAAW,CAACkB,KAAK,eAAe,CAAClB,EAAG,MAAM,CAAEJ,EAAe,YAAEI,EAAG,IAAI,CAACM,YAAY,mBAAmBJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIuB,YAAYR,MAAW,CAACf,EAAIW,GAAG,kBAAkBX,EAAIQ,KAAOR,EAAIwB,YAAiGxB,EAAIQ,KAAxFJ,EAAG,OAAO,CAACM,YAAY,oBAAoB,CAACV,EAAIW,GAAG,sCAA+C,GAAGX,EAAIQ,KAAKJ,EAAG,OAAO,CAACM,YAAY,aAAaI,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIyB,SAASV,MAAW,CAACX,EAAG,YAAY,CAACE,MAAM,CAAC,YAAc,iBAAiB,gBAAkBN,EAAIoB,UAAU,MAAQpB,EAAI0B,SAASC,OAAOb,GAAG,CAAC,YAAc,SAASC,GAAQf,EAAI4B,gBAAiB,GAAM,SAAW5B,EAAI6B,cAAc,YAAc7B,EAAI8B,4BAA4B,QAAU9B,EAAI+B,qBAAqB,aAAe/B,EAAIgC,qBAAqB,GAAG5B,EAAG,IAAI,CAACM,YAAY,iBAAiBJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIiC,eAAelB,MAAW,CAACf,EAAIW,GAAG,sBAAsBP,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,iBAAiB,CAAEN,EAAgB,aAAEI,EAAG,gBAAgB,CAACM,YAAY,gBAAgBJ,MAAM,CAAC,KAAON,EAAIkC,gBAAgBlC,EAAIQ,MAAM,GAAGJ,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,cAAc,CAAEN,EAAkB,eAAEI,EAAG,iBAAiB,CAACM,YAAY,iBAAiBI,GAAG,CAAC,MAAQ,SAASC,GAAQf,EAAImC,gBAAiB,MAAUnC,EAAIQ,MAAM,GAAIR,EAAW,QAAEI,EAAG,UAAU,CAACM,YAAY,UAAU0B,MAAM,CACp2EC,KAAMrC,EAAIsC,QAAQC,EAAI,KACtBC,IAAKxC,EAAIsC,QAAQG,EAAI,MACpBnC,MAAM,CAAC,KAAON,EAAIsC,WAAWtC,EAAIQ,KAAKJ,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,SAAS,CAAEN,EAAI4B,gBAAkB5B,EAAImC,eAAgB/B,EAAG,MAAM,CAACM,YAAY,WAAWI,GAAG,CAAC,MAAQd,EAAI0C,mBAAmB1C,EAAIQ,OAAOJ,EAAG,aAAa,CAACE,MAAM,CAAC,KAAO,eAAe,CAAEN,EAAkB,eAAEI,EAAG,UAAU,CAACU,GAAG,CAAC,MAAQ,SAASC,GAAQf,EAAI4B,gBAAiB,MAAU5B,EAAIQ,MAAM,IAAI,GAAGR,EAAIQ,QAC7WmC,EAAkB,CAAC,WAAa,IAAI3C,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACM,YAAY,qBAAqB,CAACN,EAAG,KAAK,CAACJ,EAAIW,GAAG,6BAA6BP,EAAG,IAAI,CAACJ,EAAIW,GAAG,uBAAuBP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,wCAAwC,CAACN,EAAIW,GAAG,WAAWX,EAAIW,GAAG,kCAAkCX,EAAIW,GAAG,KAAKP,EAAG,IAAI,CAACJ,EAAIW,GAAG,+G,kiBCF7YiC,EAAMC,IAAS,IAEND,IAER,SAASE,EAAYC,GACxBH,EAAII,KAAK,WAAYD,K,UCNlB,SAASE,EAASC,EAAIC,EAAIC,GAC/B,IACIC,EADAC,EAAW,IAAIC,KAGnB,OAAO,WACL,IAAIC,EAAO,IAAID,KACXE,EAAUD,EAAOF,EACrBI,aAAaL,GACTI,EAAUN,EACZD,EAAG5F,MAAM8F,EAAMO,YAEfL,EAAWE,EACXH,EAASO,WAAWV,EAAIC,EAAIQ,aAK3B,SAASE,EAAatB,GAC3B,OAAOA,EAAEuB,WAAWC,QAAQ,wBAAyB,KCbxC,SAASC,EAAgBC,GACtC,IAAIC,GAAW,EACXC,EAAQC,MACRC,EAAgBC,sCAAyBC,EAAeC,GAAgB,GAExEC,EAAM5B,IAAS,CAAC6B,OAAMC,UAASC,SAAhB,WAA6B,OAAOT,KACvD,OAAOM,EAEP,SAASE,IACPT,GAAW,EAGb,SAASQ,IACP,IAAIG,EAAQhF,OAAOiF,YAAYC,MAwF/B,SAASC,IACP,MAAO,CACLC,QAAS,UAAYpB,EAAaM,EAAMe,gBAAkB,yBAI9D,SAASC,EAAU5G,GACjB,GAAI0F,EAAImB,QAAQ,QAAU,EAAG,OAAO7G,EACpC,IAAI8G,EAAU,IAAIC,IAAIrB,GAEtB,OADAoB,EAAQE,SAAWF,EAAQE,SAASC,OAAO,EAAGH,EAAQE,SAASE,YAAY,KAAO,GAAKlH,EAChF8G,EAAQvB,WAGjB,OApGA4B,MAAMzB,EAAK,CAAC/E,KAAM,SAASyG,MAAK,SAAAC,GAC9B,IAAIC,EAAcD,EAASE,KAAKC,YAC5BC,EAAU,IAAIC,YAElB,OAAOJ,EAAYK,OAAOP,KAAKQ,GAE/B,SAASA,EAAYC,GACnB,IAAIlC,EAAJ,CAEA,IAAImC,OAA4BC,IAAnBF,EAASpH,OAAuBgH,EAAQO,OAAOH,EAASpH,MAAO,CAACwH,QAASJ,EAASK,QAAW,GAC1G,OAAOpC,EAAcgC,GAAOV,MAAK,WAC/B,IAAGS,EAASK,KAGZ,OAAOZ,EAAYK,OAAOP,KAAKQ,WAGlCR,MAAK,WAMN,OALAe,QAAQC,IAAI,YAAa9G,OAAOiF,YAAYC,MAAQF,GACpD/B,GAAY,iBAAO,CACjBmC,QAAS,uBAGJS,MAAMP,EAAU,gBAAiB,CAACjG,KAAM,SAASyG,MAAK,SAAAC,GAAQ,OAAIA,EAASgB,UAAQjB,MAAK,SAAAkB,GAC7F,IAAIC,EAASD,EAAIE,MAAM,MAEvB,OADAD,EAAOE,SAAQ,SAAAC,GAAK,OAAI9C,EAAM+C,QAAQD,MAC/BH,QAERnB,MAAK,SAACmB,GAEP,IAAIK,EAAQtB,EAAauB,EAAYC,EACrC,OAAO3B,MAAMP,EAAU,aAAc,CAACjG,KAAM,SAC3CyG,MAAK,SAAAC,GAEJ,OADAC,EAAcD,EAASE,KAAKC,YACrBF,EAAYK,OAAOP,KAAKQ,MAGjC,SAASA,EAAYC,GACnB,IAAIlC,EAAJ,CAEA,IAAImC,EAAQD,EAASpH,MACrB,IAAKqH,GAASe,EACZ,MAAM,IAAIE,MAAM,uBAElB,IAAKjB,EAIH,OAHAvD,GAAY,iBAAO,CACjByE,WAAW,MAENpD,EAGT,GAAIiD,EAAY,CACd,IAAII,EAAM,IAAIC,WAAWL,EAAWM,WAAarB,EAAMqB,YACvDF,EAAIG,IAAI,IAAIF,WAAWL,GAAa,GACpCI,EAAIG,IAAI,IAAIF,WAAWpB,GAAQe,EAAWM,YAC1CrB,EAAQmB,EACRJ,EAAa,KAEf,IAAIQ,EAAuD,EAAnCC,KAAKC,MAAMzB,EAAMqB,WAAa,GAClDrB,EAAMqB,WAAa,IAAM,IAC3BN,EAAaf,EAAMtG,MAAM6H,IAG3B,IADA,IAAMG,EAAO,IAAIC,SAAS3B,EAAM4B,QACvBxL,EAAI,EAAGA,EAAImL,EAAmBnL,GAAK,EAAG,CAC7C,IAAIyL,EAASH,EAAKI,SAAS1L,GAAyB,GACpD,GAAIyL,EAAS,EACXf,GAAUe,EAAS,EACnBb,EAAS,EACTlD,EAAM+C,QAAQJ,EAAOK,QAChB,CACL,IAAIiB,EAAOF,EAAS,EACpB/D,EAAMkE,QAAQvB,EAAOK,GAASL,EAAOsB,GAAOf,GAC5CA,GAAU,GAId,OAAIjB,EAASK,MACX3D,GAAY,iBAAO,CACjByE,WAAW,MAENpD,IAETrB,EAAYkC,GACLa,EAAYK,OAAOP,KAAKQ,SAiB5B1B,EAGT,SAASF,EAAc+D,GACrB7D,EAAIzB,KAAK,gBAAiBsF,GAG5B,SAAS9D,EAAe8D,GACtB7D,EAAIzB,KAAK,cAAesF,I,oDC7HPC,E,wDACnB,WAAYC,GAAI,6BACd,IAAIC,EAAUC,eAAc,CAC1BF,KACAG,OAAQ,maAmBRC,SAAU,kMAUVC,WAAY,CACVC,MAAO,IAAIC,QAEbC,UAAW,CACTC,MAAO,IAAIC,OAAmB,EAC3B,IAAM,IAAM,GAAM,GAAK,GAAM,GAC9B,GAAM,GAAK,IAAM,IAAM,IAAM,MAIjCC,YAzC0B,WA0CxB,qEAGFC,aA7C0B,WA8CxB,MAAO,gCA/CG,OAmDd,cAAMX,GACN,EAAKY,QAAU,EApDD,E,2CAsDhB,WACOpJ,KAAKqJ,WACRrJ,KAAKqJ,SAAW,CACdC,oBAAqBtJ,KAAKsJ,oBAC1BF,QAASpJ,KAAKoJ,UAGlBpJ,KAAKqJ,SAASD,QAAUpJ,KAAKoJ,QAC7BpJ,KAAKwI,QAAQe,KAAKvJ,KAAKqJ,Y,mBAGzB,WACErJ,KAAKwI,QAAQgB,SAAS,O,GAnEmBC,Q,iCCAxBC,E,wDACnB,WAAYnB,GAAkB,MAAdoB,EAAc,uDAAJ,GAAI,uBAC5B,IAAInB,EAAUC,eAAc,CAC1BF,KACAqB,MAAOD,EAAQC,MACflB,OAAQ,4RAcRC,SAAU,2GAQVC,WAAY,CACVC,MAAO,IAAIC,UA3Ba,OA8B5B,cAAMN,GACN,EAAKY,aAA8B/C,IAApBsD,EAAQP,QAAwB,EAAIO,EAAQP,QAC3D,EAAKP,MAAQc,EAAQd,OAAS,IAhCF,E,2CAmC9B,WACO7I,KAAKqJ,WACRrJ,KAAKqJ,SAAW,CACdC,oBAAqBtJ,KAAKsJ,oBAC1BF,QAASpJ,KAAKoJ,UAGlBpJ,KAAKqJ,SAASD,QAAUpJ,KAAKoJ,QAC7BpJ,KAAKwI,QAAQe,KAAKvJ,KAAKqJ,Y,mBAGzB,WACErJ,KAAKwI,QAAQgB,SAAS,K,wBAGxB,YAA+B,IAAlBK,EAAkB,EAAlBA,QAAShB,EAAS,EAATA,MACpBgB,EAAUA,EAAQC,OAElB,IADA,IAAIC,EAAYC,IAAOH,GACdrN,EAAI,EAAGA,EAAIuN,EAAUrN,OAAQF,IAAK,CACzC,IAAIyN,EAAuB,EAAfF,EAAUvN,GACtBwD,KAAKkK,IAAI,CACPlB,MAAO,CAACa,EAAQI,GAAQJ,EAAQI,EAAQ,IACxCpB,MAAOA,GAAS7I,KAAK6I,QAIzB,IAAK,IAAIrM,EAAI,EAAGA,EAAI,IAAKA,EACvBwD,KAAKkK,IAAI,CACPlB,MAAO,CAAC,EAAG,GACXH,MAAO,Q,GAjEiCY,Q,YCD3BU,E,wDACnB,WAAY5B,GAAkB,MAAdoB,EAAc,uDAAJ,GAAI,uBAC5BpB,EAAG6B,aAAa,4BAEhB,cAAMC,EAAe9B,EAAIoB,IAEzB,IAAIW,EAAO,EAAKC,UAAY,IAAIC,MAChCF,EAAIG,YAAc,YAClB,EAAKC,SAAU,EACf,EAAKC,MAAQ,GACb,EAAKC,SAAWjB,EAAQiB,UAAY,EACpC,EAAKxB,aAA8B/C,IAApBsD,EAAQP,QAAwBO,EAAQP,QAAU,EACjE,EAAKyB,SAAW,KAEhB,IAAIC,EAAW,QAba,OAc5BrF,MAAM,GAAD,OAAIqF,EAAJ,gBAA4B,CAAE7L,KAAM,SACtCyG,MAAK,SAACpD,GAAD,OAAOA,EAAEyI,UACdrF,MAAK,SAACmF,GACL,EAAKA,SAAWA,EAChB,EAAKG,SAAW,IAAIC,IACpBJ,EAASK,MAAMnE,SAAQ,SAACoE,GACtB,IAAIC,EAAYC,OAAOC,aAAaH,EAAKI,IACzC,EAAKP,SAAStD,IAAI0D,EAAWD,MAG/B,EAAKZ,UAAUiB,OAAS,WACtB,EAAKC,oBAAqB,EAC1B,EAAKjD,QAAQkD,iBAAiB,OAAQ,EAAKnB,WAC3C,EAAKG,SAAU,EACf,EAAKiB,gBAAkBrB,EAAIsB,MAC3B,EAAKC,iBAAmBvB,EAAIwB,OAE5B,EAAKnB,MAAM5D,SAAQ,SAACgF,GAAD,OAAO,EAAKC,QAAQD,MACvC,EAAKpB,MAAQ,IAEf,EAAKJ,UAAU0B,IAAf,UAAwBnB,EAAxB,mBAlCwB,E,4CAsC9B,WACE9K,KAAKwI,QAAQgB,SAAS,K,kBAGxB,WACOxJ,KAAKqJ,WACRrJ,KAAKqJ,SAAW,CACdC,oBAAqBtJ,KAAKsJ,oBAC1BT,MAAO,CAAC,GAAK,GAAK,GAAK,GACvBqD,KAAM,GACN9C,QAASpJ,KAAKoJ,UAGlBpJ,KAAKqJ,SAASD,QAAUpJ,KAAKoJ,QAG7BpJ,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAAS6C,KAAO,IACrBlM,KAAKwI,QAAQe,KAAKvJ,KAAKqJ,UAGvBrJ,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,GACzB7I,KAAKqJ,SAASR,MAAM,GAAK,EACzB7I,KAAKqJ,SAAS6C,KAAO,GACrBlM,KAAKwI,QAAQe,KAAKvJ,KAAKqJ,Y,oBAGzB,SAAO/G,EAAGE,GAAG,WACP2J,EAAK,EACT1G,MACE,qGAECC,MAAK,SAAC0G,GAAD,OAAOA,EAAEzF,UACdjB,MAAK,SAACiB,GACL,IAAI0F,EAAY,EAChB1F,EAAKG,MAAM,MAAMC,SAAQ,SAACuF,GACxB,EAAKN,QAAQ,CAAErF,KAAM2F,EAAMhK,IAAGE,EAAGA,EAAI2J,IACrCA,GAAM,EAAKvB,SACXyB,GAAa,EACTA,EAAY,MACdA,EAAY,EACZ/J,GAAK,GACL6J,EAAK,W,qBAMf,SAAQI,GACN,GAAKvM,KAAK0K,QAAV,CADgB,IAKV/D,EAA8B4F,EAA9B5F,KALU,EAKoB4F,EAAxBjK,SALI,MAKA,EALA,IAKoBiK,EAAjB/J,SALH,MAKO,EALP,IAKoB+J,EAAVC,SALV,MAKc,EALd,EAMhB,QAAanG,IAATM,EACF,MAAM,IAAIU,MAAM,0BAA4BkF,GAE9C,IAAIE,EAAK,EACL7B,EAAW2B,EAAS3B,UAAY5K,KAAK4K,SACzC,QAAuBvE,IAAnBkG,EAASG,MAAqB,CAChC,IADgC,EAC5BC,EAAI,EADwB,iBAEfhG,GAFe,IAEhC,2BAAuB,KAAdwE,EAAc,QACjByB,EAAS5M,KAAKgL,SAASrM,IAAIwM,GAC1ByB,IACLD,GAAKC,EAAOC,WALkB,8BAOhCjC,EAAY2B,EAASG,MAAQ1M,KAAK6K,SAASiC,KAAKC,KAAQJ,EAG1D,IAAIK,EAAQpC,EAAW5K,KAAK6K,SAASiC,KAAKC,KAC1C,QAAoB1G,IAAhBkG,EAASU,GAAkB,CAC7B,IAD6B,EACzBN,EAAI,EADqB,iBAEZhG,GAFY,IAE7B,2BAAuB,KAAdwE,EAAc,QACjByB,EAAS5M,KAAKgL,SAASrM,IAAIwM,GAC1ByB,IAELD,GAAKC,EAAOC,WANe,8BAQ7BJ,GAAME,EAAIJ,EAASU,GAAKD,OAEN3G,IAAhBkG,EAASW,KACX1K,GAAKoI,EAAW2B,EAASW,IAjCX,uBAoCCvG,GApCD,IAoChB,2BAAuB,KAAdwE,EAAc,QACjByB,EAAS5M,KAAKgL,SAASrM,IAAIwM,GAC1ByB,GAKL5M,KAAKkK,IAAI,CACPiD,SAAU,CAAC7K,EAAImK,EAAIjK,EAAIoK,EAAOQ,QAAUJ,EAAOR,GAC/Ca,SAAU,CACPzC,EAAWgC,EAAOhB,MAAS,IAC1BhB,EAAWgC,EAAOd,OAAU,IAEhCwB,gBAAiB,CACfV,EAAOtK,EAAItC,KAAK2L,gBAChB,EAAIiB,EAAOpK,EAAIxC,KAAK6L,iBACpBe,EAAOhB,MAAQ5L,KAAK2L,iBACnBiB,EAAOd,OAAS9L,KAAK6L,oBAG1BY,GAAMG,EAAOC,SAAWG,GAjBtBvG,QAAQ8G,MAAMpC,EAAO,4BAvCT,8BA0DZnL,KAAKwN,OAAOxN,KAAKwN,MAAMC,mBAxDzBzN,KAAK2K,MAAM3N,KAAKuP,O,GA9F0B9C,QA0JhD,SAASY,EAAe9B,EAAIoB,GAC1B,OAAOlB,eAAc,CACnBiF,SAAU/D,EAAQ+D,UAAY,EAC9B1F,OAAQ2B,EAAQ3B,OAChB4B,MAAOD,EAAQC,MACfrB,KACAG,OAAQ,6jBAuBRC,SAAU,0mBAsBVI,UAAW,CACTC,MAAO,IAAIC,OAAmB,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,OChNtE,IAAM0E,EAAYC,EAAQ,QAEX,SAASC,IACtB,IAAIC,EAAQ,GACRtJ,EAAM,CACRuJ,UACAC,QAGF,OAAOxJ,EAEP,SAASuJ,EAAQE,GACfH,EAAM9Q,KAAKiR,GAGb,SAASD,EAAKtM,GACZ,IAAIwM,EAAUP,EAAUQ,QAAQzM,EAAOoM,EAAO,CAACpB,MAAO,KAEtD,OAAOwB,EAAQxI,MAAK,SAAA0I,GAClB,OAAOA,EAAQC,KAAI,SAAA/L,GAAC,MAAK,CACvBgM,KAAMX,EAAUY,UAAUjM,EAAG,MAAO,QACpCqE,KAAMrE,EAAEkM,eCrBhB,IAEIC,EAFAC,EAAKd,EAAQ,QACbe,EAAQD,EAAGE,SAAS,GAAI,CAACC,WAAW,IAGzB,GACbnN,MAAOiN,EAAMhQ,IAAI,MAAQ,GACzBmQ,oBAAoB,EAEpBC,YAJa,WAKX,OAAOJ,EAAMhQ,IAAI,UAAY,yDAE/BqQ,UAPa,SAOHC,GACJA,EACFN,EAAMjH,IAAI,CAACqE,EAAGkD,IAEdN,EAAMO,MAAM,MAGhBC,cAda,WAeX,OAAOR,GAETS,kBAjBa,WAkBX,IAAIC,EAAc,CAAC,IAAK,IAAK,KAAKhB,KAAI,SAAA/P,GACpC,IAAIgR,EAAIC,OAAOC,WAAWb,EAAMhQ,IAAIL,IACpC,GAAIiR,OAAOE,SAASH,GAAI,OAAOA,KAC9BI,QAAO,SAAApN,GAAC,YAAU+D,IAAN/D,KACf,GAA2B,IAAvB+M,EAAY3S,OAAc,OAAO2S,GAEvCM,kBAxBa,SAwBKnC,GACZiB,IACFhL,aAAagL,GACbA,EAAc,GAGhBA,EAAc9K,YAAW,WACvB8K,EAAc,EACd,IAAImB,EAAKpC,EAAMqC,iBAFc,iBAGbD,EAAG9H,KAAKqF,SAHK,GAGxB7K,EAHwB,KAGrBE,EAHqB,KAGlBgK,EAHkB,KAIzBW,EAAW,CAAC7K,IAAGE,IAAGgK,KACtBmC,EAAMjH,IAAIyF,KACT,OCxCM2C,G,UAAS,CACpBC,wBAAyB,WACzBC,0BAA2B,WAC3BC,cAAe,WACfC,aAAc,aAGHC,EAAc,CACzBC,SAAU,EACVC,MAAO,EACPC,iBAAkB,EAClBC,MAAO,GACPC,KAAM,IAGKC,EAAc,CACzBC,UAAW,mB,sDCZQC,E,wDACjB,WAAYpI,EAAIoB,GAAS,6BACvB,IAAInB,EAAUC,eAAc,CAC1BF,KACAG,OAAQ,khBAmBRC,SAAU,wHAOZC,WAAY,CACVC,MAAO,IAAIC,QAEbC,UAAW,CACPC,MAAO,IAAIC,OAAmB,EAC3B,GAAK,GAAI,GAAK,EAAG,GAAK,GACtB,GAAK,EAAG,GAAK,EAAG,GAAK,OAnCL,OAuCvB,cAAMT,GACN,EAAKoD,MAASjC,GAAWA,EAAQiC,OAAU,EAxCpB,E,2CA2CzB,WACO5L,KAAKqJ,WACRrJ,KAAKqJ,SAAW,CACdC,oBAAqBtJ,KAAKsJ,oBAC1BsC,MAAO5L,KAAK4L,QAGhB5L,KAAKqJ,SAASuC,MAAQ5L,KAAK4L,MAC3B5L,KAAKwI,QAAQe,KAAKvJ,KAAKqJ,Y,mBAOzB,WACErJ,KAAKwI,QAAQgB,SAAS,O,GA5DgBC,QCM7B,SAASmH,EAA2BC,EAAmBlH,GACpE,IAAMmH,EAAc,IAAIC,IACpBC,GAAQ,EACRC,GAAW,EACTzD,EAAQqD,EAAkBK,WAEhC1D,EAAM3M,GAAG,QAASsQ,GAClB3D,EAAM3M,GAAG,YAAauQ,GACtB5D,EAAM3M,GAAG,YAAawQ,GAEtB,IAAMC,EAAmB,IAAIhJ,EAAgBkF,EAAM+D,SAC7CC,EAAmB,IAAIb,EAAenD,EAAM+D,QAAS,CAAC3F,MAAO,KAC7D6F,EAAoB,IAAId,EAAenD,EAAM+D,QAAS,CAAC3F,MAAO,KAYpE,OAVAiF,EAAkBa,WAAWD,EAAmBtB,EAAYE,OAC5DQ,EAAkBa,WAAWF,EAAkBrB,EAAYG,kBAC3DO,EAAkBa,WAAWJ,EAAkBnB,EAAYI,OAEvD5G,EAAQgI,oBACVd,EAAkBe,gBAAgBJ,EAAkB7H,EAAQgI,mBAC5Dd,EAAkBe,gBAAgBH,EAAmB9H,EAAQgI,mBAC7Dd,EAAkBe,gBAAgBN,EAAkB3H,EAAQgI,oBAGvD,CACL1K,UACA4K,kBACAC,UACApN,UACAqN,aAGF,SAASV,EAAgBzB,GAQvB,IAAIoC,EAAkBpC,EAAG9H,KAAKqF,SAAS,GACnCX,EAAI5E,KAAKqK,IAAID,EAAiB,KAClCR,EAAiB5F,MAAQhE,KAAKsK,IAAI,EAAG,GAAK1F,EAAI,KAC9CiF,EAAkB7F,MAAQhE,KAAKsK,IAAI,EAAG,GAAK1F,EAAI,KAC/CwE,GAAQ,EACJrH,GAAWA,EAAQwI,aAAaxI,EAAQwI,cAG9C,SAASN,IACPL,EAAiBY,QACjBX,EAAkBW,QAClBd,EAAiBc,QAGnB,SAASN,EAAQO,QACJhM,IAAPgM,GACF1P,EAAII,KAAK,iBAAkBsP,EAAG/T,MAEhC,IAAI4F,EAAQyF,GAAWA,EAAQhF,UAAYgF,EAAQhF,WAC9C0N,GAAOrB,IAAS9M,IACnB2N,IACAlP,EAAII,KAAK,iBAAkB,MAC3ByK,EAAMC,eAGRuD,GAAQ,EAEJqB,IACFR,IAEAlI,EAAQ2I,oBAAoBD,GAAItL,SAAQ,SAAAwL,GACtC,IAAIC,EAAQD,EAAOE,aAAejB,EAAmBC,EACrDe,EAAMtI,IAAIqI,MAEZ5I,EAAQ+I,oBAAoBL,GAAItL,SAAQ,SAAA4L,GAAM,OAAIrB,EAAiBpH,IAAIyI,MAEvEnF,EAAMC,eAIV,SAASxG,EAAQoL,GACf,IAAIlF,EAAWkF,EAAGlF,SACdvO,EAAIyT,EAAGtF,KAAO,EAElB+D,EAAY8B,OAAO,CACjBC,KAAM1F,EAAS,GAAKvO,EACpBkU,KAAM3F,EAAS,GAAKvO,EACpBmU,KAAM5F,EAAS,GAAKvO,EACpBoU,KAAM7F,EAAS,GAAKvO,EACpByT,OAIJ,SAAS3N,IACP8I,EAAMyF,YAAYzB,GAClBhE,EAAMyF,YAAYxB,GAClBjE,EAAMyF,YAAY3B,GAElB9D,EAAM0F,IAAI,QAAS/B,GACnB3D,EAAM0F,IAAI,YAAa9B,GACvB5D,EAAM0F,IAAI,YAAa7B,GAGzB,SAASF,EAAYgC,GACnB,IAAId,EAAKe,EAAYD,EAAE7Q,EAAG6Q,EAAE3Q,GAC5BsP,EAAQO,GAGV,SAASN,EAAUsB,GACjBpC,EAAWoC,EAGb,SAASjC,EAAW+B,GAClB,IAAIlC,EAAJ,CAEA,IAAIoB,EAAKe,EAAYD,EAAE7Q,EAAG6Q,EAAE3Q,QACjB6D,IAAPgM,EASJ1P,EAAII,KAAK,eAAgB,MARvBJ,EAAII,KAAK,eAAgB,CACvBT,EAAG6Q,EAAEG,cAAcC,QACnB/Q,EAAG2Q,EAAEG,cAAcE,QACnBtX,KAAMmW,EAAG/T,QAQf,SAAS8U,EAAY9Q,EAAGE,GACtB,IAAMiR,EAAcC,IAAI5C,EAAaxO,EAAGE,EAAG,GACvCmR,EAAWF,EAAY,GAC3B,QAAiBpN,IAAbsN,EAAJ,CACA,IAAItB,EAAKsB,EAAStB,GAJO,iBAMRA,EAAGlF,SANK,GAMpByG,EANoB,KAMfC,EANe,KAOrBC,EAAOlM,KAAKmM,MAAMzR,EAAIsR,EAAKpR,EAAIqR,GACnC,OAAIC,EAAOzB,EAAGtF,KAAO,EAAUsF,OAA/B,IC5IJ,IAAM2B,EAAepG,EAAQ,QAEvBqG,EAAS,CACbC,YADa,SACD5R,GACV,OAAOA,EAAIA,EAAIA,EAAIA,IAIR,SAAS6R,EAAyBC,EAAUC,EAASxD,EAAmByD,GACrF,IAAIC,EACAC,EACAC,EAAa,IACbC,EAAc,EAEZC,EAAkB,IAAI1J,IACtBuC,EAAQqD,EAAkBK,WAC1B0D,EAAS,IAAItM,EAAgBkF,EAAM+D,SACnC5K,EAAO,IAAIkO,EAAerH,EAAM+D,SAChCuD,EAAqBC,EAAyBlE,EAAmB,GAAUwD,GAGjFxD,EAAkBa,WAAWkD,EAAQzE,EAAYI,OACjDM,EAAkBa,WAAW/K,EAAMwJ,EAAYK,MAG/C,IAAIwE,EAAgBpE,EAA2BC,EAAmB,CAChElM,SAAU,kBAAM+P,EAAcD,GAAcL,GAC5C9B,sBACAI,wBAIF,OAFA/P,EAAI9B,GAAG,sBAAuBoU,GAEvB,CACLvQ,UACAwQ,OAIF,SAASD,EAAkB3W,GACzB0W,EAAclD,QAAQ6C,EAAgBhW,IAAIL,IAG5C,SAASoU,EAAoBL,GAC3B,IAAM8C,EAAS,kBAAIR,EAAgBhW,IAAI0T,EAAG/T,OAC1C6W,EAAOtM,MAAQiH,EAAOC,wBACtB,IAAIqF,EAAU,CAACD,GAOf,OANAf,EAASiB,kBAAkBhD,EAAG/T,MAAM,SAACgX,GACnC,IAAMH,EAAS,kBAAIR,EAAgBhW,IAAI2W,EAAM/J,KAC7C4J,EAAOtM,MAAQiH,EAAOE,0BACtBoF,EAAQpY,KAAKmY,MAGRC,EAGT,SAAS9C,EAAoBD,GAC3B,IAAIkD,EAAU,GAYd,OAVAnB,EAASoB,aAAY,SAAAC,GACnB,IAAIhD,EAAgBgD,EAAKvO,SAAWmL,EAAG/T,MAAQmX,EAAKtN,OAASkK,EAAG/T,KAChEiX,EAAQvY,KAAK,CACX0Y,KAAMf,EAAgBhW,IAAI8W,EAAKvO,QAAQiG,SACvCwI,GAAIhB,EAAgBhW,IAAI8W,EAAKtN,MAAMgF,SACnCtE,MAAO4J,EAAe,WAAa3C,EAAOI,aAC1CuC,oBAIG8C,EAGT,SAAS7Q,EAAQkR,GACfC,qBAAqBrB,GACrB7R,EAAIuQ,IAAI,sBAAuB+B,GAE/BtO,EAAKmP,OAAO7C,YAAYtM,GACxBA,EAAKjC,UAELsQ,EAActQ,UAEdoQ,EAAmBiB,uBAAsB,WACvCnB,EAAOkB,OAAO7C,YAAY2B,GAC1BA,EAAOlQ,UACHkR,GAAeA,MAClBjB,EAAiBL,EAAcM,OAA0BvO,IAAlBuP,GAC1CpB,EAAM,KACNhH,EAAMC,cAGR,SAASyH,IACPJ,EAAmBkB,eACnBC,IAIF,SAASA,IACP1B,EAASP,EAAaI,EAAU,CAC9B8B,SAAU,GACVC,aAAc,IACdC,kBAAmB,KACnBC,SAAU,IACVC,SAL8B,SAKrBC,GACP,IAAIlE,EAAKiC,EAAa3V,IAAI4X,GAC1B,OAAOlE,EAAGtF,KAAOnF,KAAK4O,KAAKnE,EAAGtF,SAIlC0J,IAGAjC,EAAMkC,sBAAsBC,GAG9B,SAASA,IACP,IAAK,IAAIna,EAAI,EAAGA,EAAI,KAAMA,EAAG+X,EAAOqC,OAEpCC,IAEInC,IAAgBD,GAClBD,EAAMkC,sBAAsBC,GACxBjC,EAAc,KAAO,GACvB7R,GAAY,iBAAO,CACjBmC,QAAS,eAAF,OAAiB0P,EAAjB,eAAmCD,EAAnC,yBAIXqC,IAGFtJ,EAAMuJ,WAAWC,KAEjBxJ,EAAMC,cAGR,SAASwJ,IACP,IAAIC,EAAO,KAOX,GANA9C,EAAS+C,aAAY,SAAAC,GACnB,GAAIA,EAAKlb,MAAQkb,EAAKlb,KAAKmb,OAEzB,OADAH,EAAOE,EAAK7L,IACL,MAGN2L,EACH,MAAM,IAAI7P,MAAM,wCAElB,OAAO6P,EAGT,SAASJ,IACP1C,EAAS+C,aAAY,SAAAC,GAAQ,MACd7C,EAAO+C,gBAAgBF,EAAK7L,IAApCjJ,EADsB,EACtBA,EAAGE,EADmB,EACnBA,EACJ6P,EAAKsC,EAAgBhW,IAAIyY,EAAK7L,IAClCyJ,EAAc/N,QAAQoL,GACtB1L,EAAKqF,QAAQ,CACX1J,IACAE,EAAGA,EAAc,IAAV6P,EAAGtF,KACVpG,KAAM0L,EAAG/T,KACToO,MAAO,EAAK2F,EAAGtF,KACfE,GAAI,QAIR,IAAIsK,EAAWN,IACfjC,EAAclD,QAAQ6C,EAAgBhW,IAAI4Y,IAC1C1U,GAAY,iBAAO,CACjB2U,cAAc,EACdvW,aAAcsW,MAKlB,SAASP,IACP,IAAIS,EAAe,CACjBrV,KAAMsV,IACNC,OAAQD,IACRnV,IAAKmV,IACLE,QAASF,KASX,OAPAtD,EAAS+C,aAAY,SAAAC,GAAQ,MACd7C,EAAO+C,gBAAgBF,EAAK7L,IAApCjJ,EADsB,EACtBA,EAAGE,EADmB,EACnBA,EACJF,EAAImV,EAAarV,OAAMqV,EAAarV,KAAOE,GAC3CA,EAAImV,EAAaE,QAAOF,EAAaE,MAAQrV,GAC7CE,EAAIiV,EAAalV,MAAKkV,EAAalV,IAAMC,GACzCA,EAAIiV,EAAaG,SAAQH,EAAaG,OAASpV,MAE9CiV,EAGT,SAASZ,IACPzC,EAAS+C,aAAY,SAAAC,GACnB,IAAIS,EAAMtD,EAAO+C,gBAAgBF,EAAK7L,IAClC8G,EAAKsC,EAAgBhW,IAAIyY,EAAK7L,IAClC8G,EAAGlF,SAAS,GAAK0K,EAAIvV,EACrB+P,EAAGlF,SAAS,GAAK0K,EAAIrV,EACrBoS,EAAOkD,OAAOzF,EAAG9G,GAAI8G,MAIzB,SAASoE,IACPrC,EAAS+C,aAAY,SAAAC,GACnB,IAAI/E,EAAKiC,EAAa3V,IAAIyY,EAAK7L,IAC/B,IAAK8G,EAAI,MAAM,IAAIhL,MAAM,wBAA0B+P,EAAK7L,IAExD,IAAIsM,EAAME,EAAa1F,EAAGlF,UACtBtE,EAAQiH,EAAOG,cAIf+H,EAAQ,CACV7K,SAAU0K,EACVhP,QACAkE,KAAMsF,EAAGtF,KACTxB,GAAIoJ,EAAgB5H,KACpBzO,KAAM+T,EAAG/T,MAEXqW,EAAgBjN,IAAI2K,EAAG/T,KAAM0Z,GAC7BpD,EAAO1K,IAAI8N,GACXzD,EAAO0D,gBAAgBb,EAAK7L,GAAIsM,EAAI,GAAIA,EAAI,QAMlD,SAAS9C,EAAyBlE,EAAmBqH,EAAkBC,GACrE,IACI3D,EACA4D,EACAC,EAAWC,EAASC,EACpBC,EACAC,EAAWrD,EALX5R,EAAU,EAMRgK,EAAQqD,EAAkBK,WAEhC,MAAO,CACLwH,eACAC,cACA3C,eACAD,wBACArR,QALK,WAMHmR,qBAAqBrB,KAIzB,SAASkE,EAAazV,GACpBO,EAAU,EACV6U,EAAYO,IAFY,IAGnBhN,EAA4BuM,EAA5BvM,MAAOE,EAAqBqM,EAArBrM,OAAQvJ,EAAa4V,EAAb5V,IAAKH,EAAQ+V,EAAR/V,KACzBkW,EAAU,CACR/V,MACAH,OACAuV,MAAOvV,EAAOwJ,EACdgM,OAAQrV,EAAMuJ,GAGhBsM,EAAcS,EACdN,EAAkC,WAChCvC,IACA/S,KAGF4S,qBAAqBrB,GACrBA,EAAMkC,sBAAsBC,GAG9B,SAASgC,EAAYlB,EAAce,GACjCJ,EAAcS,EACdrV,EAAU,EACV6U,EAAYO,IACZN,EAAUb,EACV5B,qBAAqBrB,GACrBA,EAAMkC,sBAAsBC,GAC5B4B,EAAkC,KAC9BC,IACFD,EAAkCC,GAItC,SAASI,IACP,IAAIhJ,EAAKpC,EAAMqC,iBACR1C,EAAYyC,EAAG9H,KAAfqF,SACH2L,EAAO3L,EAAS,GAAKvF,KAAKmR,IAAInJ,EAAGoJ,IAAM,GAAKpJ,EAAGqJ,WACnD,MAAO,CACL7W,KAAM+K,EAAS,GAAK2L,EACpBnB,MAAOxK,EAAS,GAAK2L,EACrBvW,IAAK4K,EAAS,GAAK2L,EACnBlB,OAAQzK,EAAS,GAAK2L,GAI1B,SAAS9C,IACPnF,EAAkBqI,cAAczI,EAAYC,WAAWyI,SAASpS,SAAQ,SAAAqS,GACtEA,EAAGhQ,QAAU,KAEfyH,EAAkBwI,eAAe5I,EAAYC,WAG/C,SAASqF,EAAsBvP,EAAM8S,EAAS9K,EAAQ+K,EAAiBC,GACrE,GAAIA,EAOF,OALA3I,EAAkB4I,kBAAkBhJ,EAAYC,WAChDG,EAAkBqI,cAAczI,EAAYC,WAAWyI,SAASpS,SAAQ,SAAAqS,GACtEA,EAAGhQ,QAAU,UAEf5C,IAGFhD,EAAU,EACV4U,EAAcsB,EACd7D,qBAAqBrB,GACrBA,EAAMkC,sBAAsBC,GAC5B6B,EAAehS,EAEf4O,EAAUmE,EACVd,EAAY,GACZa,EAAQvS,SAAQ,SAACsL,EAAI/T,GACnBma,EAAUzb,KAAK,CACbqV,KACAqD,KAAMqC,EAAa1F,EAAGlF,UACtBwI,GAAInH,EAAO7P,IAAIL,GAAM6O,cAK3B,SAASwJ,IACP,GAAInT,GAAW0U,EAGb,OAFA1U,EAAU0U,OACVE,EAAY,GAId5D,EAAMkC,sBAAsBC,GAC5ByB,EAAY5U,EAAU0U,GACtB1U,GAAW,EAGb,SAASqV,EAAgBvW,GACvB,GAAU,IAANA,EAGF,OAFIiW,GAAiCA,SACrCA,EAAkC,MAIpC/K,EAAMuJ,WAAW,CACfxU,IAAKoX,EAAKtB,EAAU9V,IAAK+V,EAAQ/V,IAAKD,GACtCF,KAAMuX,EAAKtB,EAAUjW,KAAMkW,EAAQlW,KAAME,GACzCqV,MAAOgC,EAAKtB,EAAUV,MAAOW,EAAQX,MAAOrV,GAC5CsV,OAAQ+B,EAAKtB,EAAUT,OAAQU,EAAQV,OAAQtV,KAEjDkL,EAAMC,cAGR,SAASkM,EAAKjE,EAAMC,EAAI3W,GACtB,OAAO2W,EAAK3W,EAAI0W,GAAQ,EAAI1W,GAG9B,SAAS0a,EAAOpX,GACJ,IAANA,GAGFuO,EAAkB4I,kBAAkBhJ,EAAYC,WAGlD,IAAItH,EAAU6K,EAAOC,YAAY5R,GACjCuO,EAAkBqI,cAAczI,EAAYC,WAAWyI,SAASpS,SAAQ,SAAAqS,GACtEA,EAAGhQ,QAAUA,KAEfqP,EAAU1R,SAAQ,SAAAqQ,GAChB,IAAI/E,EAAK+E,EAAK/E,GACdA,EAAGlF,SAAS,GAAKwM,EAAKvC,EAAK1B,KAAK,GAAI0B,EAAKzB,GAAG,GAAIrT,GAChD+P,EAAGlF,SAAS,GAAKwM,EAAKvC,EAAK1B,KAAK,GAAI0B,EAAKzB,GAAG,GAAIrT,GAChD8S,EAAQ0C,OAAOzF,EAAG9G,GAAI8G,MAExBxB,EAAkBK,WAAWzD,cAEnB,IAANnL,GAAWkW,GAEbA,KAKN,SAAST,EAAaF,GACpB,MAAO,CAACA,EAAI,GAAIA,EAAI,GAAIA,EAAI,ICnYf,SAAS+B,EAAwBpM,GAE9C,IAAMqM,EAAc,IAAI5O,IAExB,MAAO,CACLyG,aACAE,kBACAyH,iBACAI,oBACAP,cAAe,SAACY,GAAD,OAAeD,EAAYlb,IAAImb,IAC9C5I,SAAU,kBAAM1D,IAGlB,SAASiM,EAAkBK,GACzB,IAAIC,EAAQF,EAAYlb,IAAImb,GAC5B,QAAczT,IAAV0T,EAAqB,MAAM,IAAI1S,MAAM,kBAAoByS,GACxDC,EAAMC,WACXD,EAAMC,UAAW,EACjBD,EAAMZ,SAASpS,SAAQ,SAAAsB,GAErBqJ,EAAWrJ,EAASA,EAAQ4R,WAIhC,SAASrI,EAAgBvJ,EAASyR,GAChC,IAAIC,EAAQF,EAAYlb,IAAImb,QACdzT,IAAV0T,IACFA,EAAQ,CACNZ,SAAU,GACVa,UAAU,GAEZH,EAAYnS,IAAIoS,EAAWC,IAG7BA,EAAMZ,SAASnc,KAAKqL,GAGtB,SAASgR,EAAeS,GACtB,IAAIC,EAAQF,EAAYlb,IAAImb,GAC5B,IAAKC,EACH,MAAM,IAAI1S,MAAM,4BAA8ByS,GAG5CC,EAAMC,WACVD,EAAMC,UAAW,EACjBD,EAAMZ,SAASpS,SAAQ,SAAAsB,GACjBA,EAAQyN,QAAQzN,EAAQyN,OAAO7C,YAAY5K,OAInD,SAASqJ,EAAWrJ,EAAS6R,GAC3B7R,EAAQ4R,MAAQC,EAChB,IAAIC,EAAc3M,EAAM4M,UACpBC,EAAiC,KACrCF,EAAYG,SAASvT,SAAQ,SAAAqS,GAC3B,IAAIa,EAAQb,EAAGa,WACD5T,IAAV4T,IAEFxT,QAAQ8T,KAAK,oCAAqCN,GAClDA,EAAQ,GAENA,GAASC,IACXG,EAAiCjB,MAGjCiB,EACFF,EAAYK,iBAAiBnS,EAASgS,GAItCF,EAAYM,YAAYpS,GAA0B,ICtDzC,SAASqS,EAA2BC,GACjD,IAAIC,GAAmB,EACnBpN,EAAQqN,KACRC,EAAgBjN,IACpBjO,OAAOkb,cAAgBA,EAEvB,IAKIC,EACA1G,EAUA2G,EAhBAC,EAAgBxZ,EAASC,MACzBwZ,EAAQ,IAAI5S,EAAgBkF,EAAM+D,SAClC4J,EAAiB,IAAIzR,EAAmB8D,EAAM+D,QAAS,CAAC1I,MAAO,UAAYO,QAAS,IAEpFzC,EAAO,IAAIkO,EAAerH,EAAM+D,SAGhC6J,EAAmBC,IACnB5C,EAAY,GAEVnE,EAAe,IAAIrJ,IACnBqQ,EAAmB,IAAIrQ,IACvBsQ,EAAqB,IAAItQ,IACzBuQ,EAAgB,IAAIvQ,IAEpBwQ,EAAuBzY,EAASH,EAAa,IAAKjD,QAElDiR,EAAoB+I,EAAwBpM,GAElDqD,EAAkBa,WAAWyJ,EAAgBhL,EAAYC,UACzDS,EAAkBa,WAAWwJ,EAAO/K,EAAYI,OAChDM,EAAkBa,WAAW/K,EAAMwJ,EAAYK,MAE/CK,EAAkBe,gBAAgBuJ,EAAgB1K,EAAYC,WAC9DG,EAAkBe,gBAAgBsJ,EAAOzK,EAAYC,WACrDG,EAAkBe,gBAAgBjL,EAAM8J,EAAYC,WAGpD,IAAMsE,EAAgBpE,EAA2BC,EAAmB,CAClEc,kBAAmBlB,EAAYC,UAC/ByB,YAAa,WAEP6I,GAEJvZ,EAASkO,kBAAkBnC,IAE7B7I,SAAU,kBAAMoW,GAAUA,EAAOpW,YACjC+N,sBACAJ,wBAOF,OAJA3P,EAAI9B,GAAG,aAAc6a,GACrB/Y,EAAI9B,GAAG,UAAW8a,GAClBhZ,EAAI9B,GAAG,gBAAiB+a,GAEjB,CACLC,UACAC,MAFK,WAGHnB,EAAOmB,SAETpX,UACApD,cACA4P,SAPK,WAQH,OAAO1D,IAIX,SAASkF,EAAoBL,GAC3B,IAAInO,EAAQ6W,GAAUA,EAAOpW,WAC7B,IAAKT,EAAO,MAAO,GAEnB,IAAM6X,EAAYT,EAAiB3c,IAAI0T,EAAG2J,aACpC7G,EAAS,kBAAIb,EAAa3V,IAAI0T,EAAG/T,OACvC6W,EAAOtM,MAAQiH,EAAOC,wBACtB,IAAIqF,EAAU,CAACD,GAQf,OAPAjR,EAAMmR,kBAAkBhD,EAAG/T,MAAM,SAACgX,GAChC,IAAMH,EAAS,kBAAIb,EAAa3V,IAAI2W,EAAM/J,KAC1C4J,EAAOtM,MAAQiH,EAAOE,0BACtBoF,EAAQpY,KAAKmY,GACR4G,EAAUE,IAAI3G,EAAM/J,OAGpB6J,EAGT,SAAS9C,EAAoBD,GAC3B,IAAInO,EAAQ6W,GAAUA,EAAOpW,WAC7B,IAAKT,EAAO,MAAO,GAEnB,IAGIgY,EAHAC,EAAW,GACXJ,EAAYT,EAAiB3c,IAAI0T,EAAG2J,aACpCI,EAAqBb,EAAmB5c,IAAI0T,EAAG2J,aAE/CzG,EAAU,GAkBd,OAhBAwG,EAAUhV,SAAQ,SAACsV,GACjBH,EAAM,EACNhY,EAAMmR,kBAAkBgH,GAAY,SAAC/G,GACnC,GAAKyG,EAAUE,IAAI3G,EAAM/J,IAAzB,CACA,IAAIkH,EAAe4J,IAAehK,EAAG/T,MAAQgX,EAAM/J,KAAO8G,EAAG/T,KACzD4d,EAAMC,IAAa1J,IACvB8C,EAAQvY,KAAK,CACX0Y,KAAMpB,EAAa3V,IAAI0d,GAAYlP,SACnCwI,GAAIrB,EAAa3V,IAAI2W,EAAM/J,IAAI4B,SAC/BtE,MAAO4J,EAAe,WAAa2J,EACnC3J,iBAEFyJ,GAAO,UAIJ3G,EAGT,SAASjU,EAAYH,GACnB,IAAIiT,EAAWjQ,MACfiQ,EAASnN,QAAQ9F,EAAW,CAACkW,QAAQ,IAErC,IAAInT,EAAQ6W,EAAOpW,WACf2X,EAAgB,IAAIC,IA+BxB,SAASC,EAAapF,EAAMqF,GAC1BvY,EAAMmR,kBAAkB+B,GAAM,SAAAsF,GAC5BD,EAAavS,IAAIwS,EAAUnR,OAI/B,SAASoR,IACP3B,EAAqB7G,EAAyBC,EAAUC,EAASxD,EAAmByD,GACpF0G,EAAmB9F,MAtCrBsH,EAAarb,EAAWmb,GAExBM,MAAMlH,KAAK4G,GAAevV,SAAQ,SAAAqQ,GAChCoF,EAAapF,EAAMkF,MAGrBA,EAAcvV,SAAQ,SAAAqQ,GACpB,IAAIyF,EAAYzI,EAAS0I,QAAQ1F,GACjC,IAAKyF,IAAcA,EAAU3gB,KAAM,CACjC,IAAI6gB,EAAe7Y,EAAM8Y,QAAQ5F,EAAMjW,IAAc+C,EAAM8Y,QAAQ5I,EAAUgD,GAC7EhD,EAASnN,QAAQmQ,EAAM,CAAC2F,iBAG1B7Y,EAAMmR,kBAAkB+B,GAAM,SAACsF,EAAWjH,GACxC,GAAK6G,EAAcL,IAAIS,EAAUnR,MAC7B6I,EAAS4I,QAAQvH,EAAKvO,OAAQuO,EAAKtN,MAAvC,CAEA,IAAI8U,EAAexH,EAAKvO,SAAW/F,GAAesU,EAAKtN,OAAShH,EAChEiT,EAAShM,QAAQqN,EAAKvO,OAAQuO,EAAKtN,KAAM,CAAC8U,uBAI9CjI,EAAcjD,WAAU,GACpBiJ,IAEFA,EAAmBtW,UACnBsW,EAAqB,MAEvB2B,IAcF,SAASjY,IACHqW,GAAQA,EAAOrW,UACnB/B,EAAIuQ,IAAI,aAAcwI,GACtB/Y,EAAIuQ,IAAI,UAAWyI,GACnBhZ,EAAIuQ,IAAI,gBAAiB0I,GAEzB5G,EAActQ,UACd8I,EAAM9I,UAGR,SAASgX,EAAUwB,GAEjB,IAAI7K,EAAKiC,EAAa3V,IAAIue,GAC1B,GAAK7K,EAAL,CAH2B,qBAKZA,EAAGlF,SALS,GAKtBF,EALsB,KAKlBC,EALkB,KAMvBH,EAAyB,GAAjBsF,EAAGtF,MAAQ,IACvBS,EAAMuJ,WAAW,CACf3U,KAAM6K,EAAKF,EACXxK,IAAK2K,EAAKH,EACV4K,MAAO1K,EAAKF,EACZ6K,OAAQ1K,EAAKH,IAGXiO,IACFA,EAAmBtW,SAAQ,WACzBsQ,EAAcjD,WAAU,MAE1BiJ,EAAqB,MAGvBhG,EAAclD,QAAQO,GACtB7E,EAAMC,eAGR,SAASkO,IAEP3G,EAAcnD,kBAEdrE,EAAMC,cAGR,SAASmO,IACHZ,IACFA,EAAmBtW,SAAQ,WACzBsQ,EAAcjD,WAAU,MAE1BiJ,EAAqB,MAIzB,SAASa,EAAQsB,GACXpC,GAAQA,EAAOrW,UAEnBqW,EAAShX,EAAgBoZ,GACtBtc,GAAG,gBAAiBuc,GACpBvc,GAAG,cAAewc,GAClB5Y,OAGL,SAAS2Y,EAAmB/U,GAE1B,GAAwB,QAApBA,EAAQiV,QAAmB,CAC7B,IAAIC,GAAclV,EAAQO,WAAWjK,IAAI,YAAc,iBACpDmI,MAAM,KACNuH,KAAI,SAAC/L,GAAD,OAAOiN,OAAOC,WAAWlN,MAC7BoN,OAAO8N,IAEV,GAA0B,IAAtBD,EAAW7gB,OAAc,MAAM,IAAI2K,MAAM,+BAAiCgB,EAAQO,WAAWjK,IAAI,YAErG0V,EAAU,CACRjS,KAAMmb,EAAW,GACjBhb,IAAKgb,EAAW,GAChB3R,MAAO2R,EAAW,GAClBzR,OAAQyR,EAAW,IAGhB3C,GACHpN,EAAMuJ,WAAW,CACf3U,KAAMiS,EAAQjS,KACdG,IAAK8R,EAAQ9R,IACboV,MAAOtD,EAAQjS,KAAOiS,EAAQzI,MAC9BgM,OAAQvD,EAAQ9R,IAAM8R,EAAQvI,cAG7B,GAAwB,SAApBzD,EAAQiV,QACjBG,GAAUpV,QACL,GAAwB,WAApBA,EAAQiV,QACjBrW,EAAQoB,OACH,CACL,IAAIqV,EAAYrV,EAAQO,WAAWjK,IAAI,aACnC+e,GAAWtC,EAAiBuC,cAAcD,IAIlD,SAASL,EAAiBhV,GACxB,IAAIqV,EAAYrV,EAAQO,WAAWjK,IAAI,aACnC+e,GAAWtC,EAAiBwC,aAAaF,GAG/C,SAASzW,EAAQmS,GACf,IAAI9W,EAAIub,GAAoBzE,EAAI,MAC5B5W,EAAIsb,GAAWD,GAAoBzE,EAAI,OACvCxa,EAAIif,GAAoBzE,EAAI,KAC5B8D,EAAWa,GAAiB3E,EAAI,MAEpC,GADoB,MAAhB8D,EAAS,KAAYA,EAAWA,EAAS3X,OAAO,IAChD+O,EAAa2H,IAAIiB,GACnB,MAAM,IAAI7V,MAAM,uBAAyB6V,GAE3C,IAAIlB,EAAc+B,GAAiB3E,EAAGtD,OAAQ,MAC1CiG,EAAYT,EAAiB3c,IAAIqd,GAChCD,IACHA,EAAY,IAAIQ,IAChBjB,EAAiB5T,IAAIsU,EAAaD,IAEpCA,EAAU7R,IAAIgT,GAEd,IAAI/P,EAAWiO,EAAiBsC,UAAUpb,EAAGE,GACzC6P,EAAK,CACP2J,cACA7O,WACAtE,MAAO,WACPkE,KAAU,EAAJnO,EACN2M,GAAIkN,EAAU/b,OACd4B,KAAM4e,GAER5I,EAAa5M,IAAIwV,EAAU7K,GAC3BoG,EAAUzb,KAAKqV,GACf2C,EAAc/N,QAAQoL,GACtB6I,EAAMhR,IAAImI,GAEV1L,EAAKqF,QAAQ,CACX1J,EAAG6K,EAAS,GACZ3K,EAAG2K,EAAS,GAAKvO,EACjB+H,KAAMuW,EACNxQ,MAAO,KAAO9N,EACdqO,GAAI,KAEN6N,EAAc/M,QAAQmP,GAEtBzB,EAAqBuC,GACrBxQ,EAAMC,cACFwN,GAAiBiC,IAAajC,GAAiBxZ,EAASC,QAAUuZ,IAAkBxZ,EAASqN,oBAC/FnM,EAAII,KAAK,iBAAkBma,GAI/B,SAASc,IACP,MAAO,CACLhZ,QAAS,UAAYpB,EAAa0Q,EAAavH,MAAQ,kBAI3D,SAAS+Q,GAAWtb,GAClB,OAAO6R,EAAQvI,OAASuI,EAAQ9R,IAAMC,EAGxC,SAASib,GAAUrE,GAAI,MACG6E,GAAY7E,GAA9BxE,EADe,EACfA,OAAQ/L,EADO,EACPA,MACdsS,EAAe+C,WAAW,CAAErU,QAAS+K,EAAQ/L,MAAOA,IACpD,IAAIsV,EAAY/E,EAAGxQ,WAAWjK,IAAI,MAAM4G,OAAO,GAC/CiW,EAAc9T,IAAIyW,EAAWtV,GAC7B0S,EAAmB7T,IAAIyW,EAAWC,GAAsBvV,IACxD2E,EAAMC,cAGR,SAAS2Q,GAAsBvV,GAA4C,IAArCwV,EAAqC,uDAAnB,IAAKC,EAAc,uDAAN,IAC/D1f,EAAKiK,GAAS,GAAM,IACpB0V,EAAK1V,GAAS,GAAM,IACpBuD,EAAKvD,GAAS,EAAK,IAHkD,EAIzD2V,GAAS5f,EAAG2f,EAAGnS,GAJ0C,sBAIpEqS,EAJoE,KAIjE3gB,EAJiE,KAI9DI,EAJ8D,KAKrEA,EAAI,KAAKmgB,EAAkB,IAL0C,MAMtDK,GAASD,EAAG3gB,EAAG8J,KAAKqK,IAAI,EAAG/T,EAAImgB,IANuB,sBAMpEM,EANoE,KAMhEC,EANgE,KAM5DC,EAN4D,KAUzE,OAAQF,GAAM,GAAOC,GAAM,GAAOC,GAAM,EAAKP,EAEjD,SAASE,GAAS5f,EAAG2f,EAAGnS,GACtBxN,GAAK,IAAK2f,GAAK,IAAKnS,GAAK,IAEzB,IACIqS,EAAG3gB,EADHoU,EAAMtK,KAAKsK,IAAItT,EAAG2f,EAAGnS,GAAI6F,EAAMrK,KAAKqK,IAAIrT,EAAG2f,EAAGnS,GACxClO,GAAKgU,EAAMD,GAAO,EAE5B,GAAIC,GAAOD,EACTwM,EAAI3gB,EAAI,MACH,CACL,IAAIO,EAAI6T,EAAMD,EAGd,OAFAnU,EAAII,EAAI,GAAMG,GAAK,EAAI6T,EAAMD,GAAO5T,GAAK6T,EAAMD,GAEvCC,GACN,KAAKtT,EAAG6f,GAAKF,EAAInS,GAAK/N,GAAKkgB,EAAInS,EAAI,EAAI,GAAI,MAC3C,KAAKmS,EAAGE,GAAKrS,EAAIxN,GAAKP,EAAI,EAAG,MAC7B,KAAK+N,EAAGqS,GAAK7f,EAAI2f,GAAKlgB,EAAI,EAAG,MAG/BogB,GAAK,EAGP,MAAO,CAAEA,EAAG3gB,EAAGI,GAGjB,SAASwgB,GAASD,EAAG3gB,EAAGI,GACtB,IAAIU,EAAG2f,EAAGnS,EAEV,GAAS,GAALtO,EACFc,EAAI2f,EAAInS,EAAIlO,MACP,CACL,IAAI6N,EAAI7N,EAAI,GAAMA,GAAK,EAAIJ,GAAKI,EAAIJ,EAAII,EAAIJ,EACxC4B,EAAI,EAAIxB,EAAI6N,EAEhBnN,EAAIkgB,EAAQpf,EAAGqM,EAAG0S,EAAI,EAAE,GACxBF,EAAIO,EAAQpf,EAAGqM,EAAG0S,GAClBrS,EAAI0S,EAAQpf,EAAGqM,EAAG0S,EAAI,EAAE,GAG1B,MAAO,CAAC7W,KAAKmX,MAAU,IAAJngB,GAAUgJ,KAAKmX,MAAU,IAAJR,GAAU3W,KAAKmX,MAAU,IAAJ3S,IAE3D,SAAS0S,EAAQpf,EAAGqM,EAAG/M,GAGrB,OAFIA,EAAI,IAAGA,GAAK,GACZA,EAAI,IAAGA,GAAK,GACZA,EAAI,EAAE,EAAUU,EAAc,GAATqM,EAAIrM,GAASV,EAClCA,EAAI,GAAY+M,EAChB/M,EAAI,EAAE,EAAUU,GAAKqM,EAAIrM,IAAM,EAAE,EAAIV,GAAK,EACvCU,GAIX,SAASmb,KACP,IAAIrN,EAAQwR,eAAYrE,EAAQ,CAC9BsE,oBAAoB,EACpBC,QAAS,KACTC,QAAS,KAGX3R,EAAM4R,cAAc,GAAO,IAAK,GAAO,IAAK,GAAO,IAAK,GAExD,IAAIC,EAAiB5d,EAAS2N,oBAC9B,GAAIiQ,EAAgB,CAElB,IAAIlS,EAAWK,EAAMqC,iBAAiB/H,KAAKqF,SAC3CA,EAAS,GAAKkS,EAAe,GAC7BlS,EAAS,GAAKkS,EAAe,GAC7BlS,EAAS,GAAKkS,EAAe,GAC7B7R,EAAM8R,YAAYvI,aAClB6D,GAAmB,MACd,CACL,IAAI2E,EAAmB,IACvB/R,EAAMuJ,WAAW,CACf3U,MAAOmd,EACPhd,KAAMgd,EACN5H,MAAO4H,EACP3H,OAAQ2H,IAGZ,OAAO/R,EAGT,SAASyQ,GAAY7E,GACnB,IAAIxE,EAAS4K,mCAAsBpG,EAAGxQ,WAAWjK,IAAI,MAAM0P,KAAI,YAAY,0BAAV/L,EAAU,KAAPE,EAAO,OAC1D4Y,EAAiBsC,UAAUpb,EAAGwb,GAAWtb,IADiB,sBACpEid,EADoE,KAChEC,EADgE,KAEzE,MAAO,CAACD,EAAIC,MAEV7W,EAAQ8W,GAASC,iCAAoBxG,IACzC,MAAO,CAAExE,SAAQ/L,UAIrB,SAASwS,IACP,IAAIwE,GAAU,EACVC,EAAK,EACPC,EAAK,EACHC,EAAiB,GAErB,MAAO,CACLrC,gBACAC,eACAF,aAGF,SAASC,EAAcsC,GACrBJ,GAAU,EACVG,EAAehjB,KAAKkjB,EAAeD,IAGrC,SAASrC,IACP,GAA8B,IAA1BoC,EAAetjB,OAAc,MAAM,IAAI2K,MAAM,kBACjD2Y,EAAeG,MACfN,GAAU,EAGZ,SAASK,EAAeE,GACtB,IAAIC,EAAmBD,EAAIE,MAAM,oBACjC,IAAKD,EACH,MAAM,IAAIhZ,MAAM,kCAAoC+Y,GACtD,IAAIG,EAAeF,EAAiB,GACjCvZ,MAAM,KACNuH,KAAI,SAAC/L,GAAD,OAAOiN,OAAOC,WAAWlN,MAC7BoN,OAAO8N,IACV,GAA4B,IAAxB+C,EAAa7jB,OACf,MAAM,IAAI2K,MAAM,uDAClB,OAAOkZ,EAGT,SAAS7C,EAAUpb,EAAGE,GAEpB,OADAge,IACO,CAACle,EAAIwd,EAAItd,EAAIud,EAAI,GAG1B,SAASS,IACFX,IAGLC,EAAK,EACLC,EAAK,EACLC,EAAejZ,SAAQ,SAAC0Z,GACtBX,GAAMW,EAAO,GACbV,GAAMU,EAAO,MAEfZ,GAAU,IAId,SAASrC,GAAalb,GACpB,OAAOiN,OAAOE,SAASnN,GAEzB,SAASub,GAAoBzE,EAAI9a,GAC/B,IAAIS,EAAQwQ,OAAOC,WAAW4J,EAAGxQ,WAAWjK,IAAIL,IAChD,IAAKiR,OAAOE,SAAS1Q,GACnB,MAAM,IAAIsI,MACR,WACE+R,EAAGkE,QACH,6CACAhf,GAEN,OAAOS,EAGT,SAASgf,GAAiB3E,EAAI9a,GAC5B,OAAO8a,EAAGxQ,WAAWjK,IAAIL,IAAS,GAGpC,SAASqhB,GAASe,GAChB,OAAQA,EAAS,IAAM,GAAOA,EAAS,IAAM,GAAOA,EAAS,IAAM,EAAK,ICrgB1E,ICKIC,GDLA,GAAS,WAAa,IAAI5gB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIW,GAAG,IAAIX,EAAIY,GAAGZ,EAAI7D,KAAKA,MAAM,QACvI,GAAkB,GEOtB,IACE0kB,MAAO,CAAC,QACR1kB,KAFF,WAGI,MAAO,IAET2kB,QAAS,ICb6Q,M,aCOpRC,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,GAAAA,G,QClBX,GAAS,WAAa,IAAI/gB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAC4gB,WAAW,CAAC,CAACziB,KAAK,gBAAgB0iB,QAAQ,kBAAkBjiB,MAAOgB,EAAmB,gBAAEkhB,WAAW,oBAAoBxgB,YAAY,gBAAgB,CAACN,EAAG,IAAI,CAACM,YAAY,cAAcJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAImhB,YAAYpgB,MAAW,CAACX,EAAG,MAAM,CAACM,YAAY,uBAAuBJ,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,KAAO,OAAO,OAAS,eAAe,eAAe,IAAI,iBAAiB,QAAQ,kBAAkB,UAAU,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,GAAK,KAAK,GAAK,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,GAAK,QAAQ,GAAK,WAAWF,EAAG,QAAQ,CAACghB,IAAI,QAAQ9gB,MAAM,CAAC,UAAY,GAAG,aAAe,MAAM,YAAc,MAAM,eAAiB,MAAM,WAAa,QAAQ,YAAcN,EAAIqhB,aAAaC,SAAS,CAAC,MAAQthB,EAAIuhB,cAAczgB,GAAG,CAAC,MAAQd,EAAIwhB,YAAY,QAAUxhB,EAAIyhB,gBAAiBzhB,EAAIuhB,cAAgBvhB,EAAI0hB,gBAAiBthB,EAAG,IAAI,CAACM,YAAY,gBAAgBJ,MAAM,CAAC,KAAO,SAAS,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAI2hB,YAAY5gB,MAAW,CAACX,EAAG,MAAM,CAACM,YAAY,2BAA2BJ,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,KAAO,OAAO,OAAS,eAAe,eAAe,IAAI,iBAAiB,QAAQ,kBAAkB,UAAU,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,GAAK,IAAI,GAAK,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,GAAK,KAAK,GAAK,YAAYN,EAAIQ,KAAMR,EAAmB,gBAAEI,EAAG,KAAK,CAACM,YAAY,eAAeV,EAAI4hB,GAAI5hB,EAAe,aAAE,SAAS6hB,EAAW3X,GAAO,OAAO9J,EAAG,KAAK,CAACd,IAAI4K,GAAO,CAAC9J,EAAG,IAAI,CAACM,YAAY,aAAaohB,MAAM,CAACC,SAAUF,EAAWE,UAAUzhB,MAAM,CAAC,KAAO,KAAKghB,SAAS,CAAC,UAAYthB,EAAIY,GAAGihB,EAAWtT,OAAOzN,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIgiB,eAAeH,YAAoB,GAAG7hB,EAAIQ,KAAMR,EAAe,YAAEI,EAAG,KAAK,CAACM,YAAY,eAAe,CAACN,EAAG,KAAK,CAACM,YAAY,aAAa,CAAGV,EAAIiiB,aAAkDjiB,EAAIQ,KAAxCJ,EAAG,OAAO,CAACJ,EAAIW,GAAG,kBAA4BX,EAAgB,aAAEI,EAAG,MAAM,CAACM,YAAY,iBAAiB,CAACN,EAAG,MAAM,CAACJ,EAAIW,GAAG,uCAAuCP,EAAG,MAAM,CAACJ,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIiiB,mBAAmBjiB,EAAIQ,SAASR,EAAIQ,QACh4E,GAAkB,GJChB0hB,I,oBAAW,IACXC,GAAM,wBAGRC,GAAO,EAeX,SAASC,GAAsBhJ,EAAIiJ,EAASC,GAE1C,OAAO,WAAuC,IAA9BC,EAA8B,uDAApB,GAAIC,EAAgB,uDAAJ,GACxC,GAAKF,GAAUA,EAAMG,SAClBF,EAAQ/T,QAAWgU,EAAUhU,SAC9B4K,EAAGsJ,SAASH,EAAQ/T,UACpB4K,EAAGsJ,SAASF,EAAUhU,SACtB4K,IAAOmJ,EAAQ/T,UACd8T,EAAMG,QAAQE,YACdL,EAAMG,QAAQE,UAAUD,SAASH,EAAQ/T,UAC1C8T,EAAMG,QAAQE,UAAUD,SAASF,EAAUhU,SAP7C,CASA,IAAMoU,EAAaxJ,EAAG8I,IAAKU,WACvBP,EAAQpB,YAAc2B,GAAcN,EAAMG,QAAQG,GACpDN,EAAMG,QAAQG,KAEdxJ,EAAG8I,IAAKW,WAAazJ,EAAG8I,IAAKW,cA7BnCC,SAASC,iBAAiB,aAAa,SAAA5P,GAAC,OAAKwN,GAAaxN,KAC1D2P,SAASC,iBAAiB,WAAW,SAAA5P,GACnC8O,GAASlb,SAAQ,SAAAqQ,GAAI,OAAIA,EAAK8K,IAAKc,gBAAgB7P,EAAGwN,UAIxDmC,SAASC,iBAAiB,cAAc,SAAA5P,GACtCwN,GAAaxN,KAEf2P,SAASC,iBAAiB,YAAY,SAAA5P,GACpC8O,GAASlb,SAAQ,SAAAqQ,GAAI,OAAIA,EAAK8K,IAAKc,gBAAgB7P,EAAGwN,UAwBzC,QACbrhB,KADa,SACR8Z,EAAIiJ,EAASC,GAChBL,GAASjlB,KAAKoc,GACd,IAAM7N,EAAK4W,KACX/I,EAAG8I,IAAO,CACR3W,KACAyX,gBAAiBZ,GAAsBhJ,EAAIiJ,EAASC,GACpDM,WAAYP,EAAQpB,WACpB4B,UAAWR,EAAQtjB,QAIvB+Y,OAZa,SAYNsB,EAAIiJ,EAASC,GAClBlJ,EAAG8I,IAAKc,gBAAkBZ,GAAsBhJ,EAAIiJ,EAASC,GAC7DlJ,EAAG8I,IAAKU,WAAaP,EAAQpB,WAC7B7H,EAAG8I,IAAKW,UAAYR,EAAQtjB,OAG9BkkB,OAlBa,SAkBN7J,GAGL,IAFA,IAAI8J,EAAMjB,GAASvlB,OAEVF,EAAI,EAAGA,EAAI0mB,EAAK1mB,IACvB,GAAIylB,GAASzlB,GAAG0lB,IAAK3W,KAAO6N,EAAG8I,IAAK3W,GAAI,CACtC0W,GAASrkB,OAAOpB,EAAG,GACnB,aAGG4c,EAAG8I,MKXd,IACEnB,WAAY,CAAd,iBACEH,MAAO,CACLQ,YAAa,CACX+B,QAAS,aAEX1B,gBAAiB,CACf0B,SAAS,GAEXzhB,MAAO,CACLyhB,QAAS,IAEXC,MAAO,CACLD,QAAS,KAGbjnB,KAhBF,WAiBI,MAAO,CACLmnB,iBAAkB,EAClBC,iBAAiB,EACjBC,aAAa,EACbvB,aAAc,KACdwB,YAAa,GACblC,aAActhB,KAAK0B,QAGvB+hB,MAAO,CACL/hB,MADJ,SACA,GACM1B,KAAKshB,aAAerS,IAGxB4R,QAAS,CACP6C,QADJ,WAEU1jB,KAAKsjB,iBAAiBtjB,KAAK2jB,0BAGjCzC,YALJ,WAMMlhB,KAAK4jB,MAAM,gBAGbC,gBATJ,WAUM7jB,KAAKsjB,iBAAkB,EACvBtjB,KAAKujB,aAAc,EACnBvjB,KAAK8jB,kBAAmB,GAG1BC,aAfJ,SAeA,GAGW/jB,KAAK8jB,mBAAkB9jB,KAAKsjB,gBAAkBU,IAGrDlI,MArBJ,WAsBM9b,KAAKikB,MAAMC,MAAMpI,SAGnBiG,eAzBJ,SAyBA,GACM/hB,KAAKshB,aAAeM,EAAWjb,KAC/B3G,KAAK6jB,kBACL7jB,KAAK4jB,MAAM,WAAY5jB,KAAKshB,eAG9BI,YA/BJ,WAgCM,IAAN,qBACM1hB,KAAK4jB,MAAM,cAAeO,GACrBA,EAAQC,gBAEbpkB,KAAKshB,aAAe,GACpBthB,KAAK2jB,yBAEL3jB,KAAK4jB,MAAM,aAGbrC,YA1CJ,SA0CA,GACMvhB,KAAKshB,aAAe+C,EAAM7V,OAAOzP,MACjCiB,KAAK4jB,MAAM,gBACX5jB,KAAK2jB,0BAGPA,uBAhDJ,WAiDM,IAAIxgB,EAAOnD,KACPmD,EAAKmhB,WACP1kB,OAAO6D,aAAaN,EAAKmhB,UACzBnhB,EAAKmhB,SAAW,MAEbnhB,EAAKme,aAKVne,EAAKmhB,SAAW1kB,OAAO+D,YAAW,WAChC,IAAIjE,EAAIE,OAAOkb,cAAc9M,KAAK7K,EAAKme,cAEvC,GAAI1E,MAAM2H,QAAQ7kB,GAChByD,EAAKqgB,YAAc9jB,EAAE2O,KAAI,SAAnC,UACA,YACA,YACA,gBAEUlL,EAAKkgB,iBAAmB,EACxBlgB,EAAK4gB,aAAarkB,GAAKA,EAAEhD,OAAS,OAC5C,OAoBU,MAAM,IAAI2K,MAAM,wCAnBhBlE,EAAK6e,aAAe,KAEpBtiB,EAAEgG,MACZ,YACY,EAAZ,eACY,EAAZ,MACY,EAAZ,+BAAc,MAAd,CACgBoc,UAAU,EACVnb,KAAMrE,EAAEqE,KACR2H,KAAMhM,EAAEgM,SAEZ,EAAZ,mBACY,EAAZ,+BAEA,YACY,EAAZ,qBAMA,SArCQtO,KAAKsjB,iBAAkB,GAwC3B9B,aA/FJ,SA+FA,GACM,IAKN,EALUgD,EAAQxkB,KAAKwjB,YACbH,EAAkBrjB,KAAKqjB,gBAK3B,GAHArjB,KAAK8jB,kBAAmB,EAGR,KAAZ3Q,EAAEsR,MAEJhY,GAAM,OACd,gBAEQA,EAAK,MACb,iBAQQ,OANI+X,EAAMnB,GACRrjB,KAAK+hB,eAAeyC,EAAMnB,IAE1BrjB,KAAK+hB,eAAe,CAA9B,8BAEQ5O,EAAEpS,iBAEV,cAEQf,KAAK6jB,kBAGFpX,GAAuB,IAAjB+X,EAAM9nB,SAEjByW,EAAEpS,iBAEEsiB,GAAmB,IACrBrjB,KAAKwjB,YAAYH,GAAiBvB,UAAW,GAE/CuB,GAAmB5W,EACf4W,EAAkB,IAAGA,EAAkBmB,EAAM9nB,OAAS,GACtD2mB,GAAmBmB,EAAM9nB,SAAQ2mB,EAAkB,GAEvDrjB,KAAKwjB,YAAYH,GAAiBvB,UAAW,EAC7C9hB,KAAKqjB,gBAAkBA,MC/NyQ,MCQlS,I,UAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBX,GAAS,WAAa,IAAItjB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACM,YAAY,WAAW,CAACN,EAAG,MAAM,CAACM,YAAY,OAAO,CAACN,EAAG,KAAK,CAACJ,EAAIW,GAAG,mBAAmBP,EAAG,IAAI,CAACM,YAAY,YAAYJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAI2kB,QAAQ5jB,MAAW,CAACX,EAAG,MAAM,CAACM,YAAY,2BAA2BJ,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,KAAO,OAAO,OAAS,eAAe,eAAe,IAAI,iBAAiB,QAAQ,kBAAkB,UAAU,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,GAAK,IAAI,GAAK,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,GAAK,KAAK,GAAK,cAAcN,EAAIS,GAAG,MAC1vB,GAAkB,CAAC,WAAa,IAAIT,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACM,YAAY,aAAa,CAACN,EAAG,IAAI,CAACJ,EAAIW,GAAG,iKAAiKP,EAAG,IAAI,CAACJ,EAAIW,GAAG,wDAAwDP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,0EAA0E,OAAS,WAAW,CAACN,EAAIW,GAAG,kBAAkBX,EAAIW,GAAG,QAAQP,EAAG,IAAI,CAACJ,EAAIW,GAAG,oHAAoHP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,mCAAmC,CAACN,EAAIW,GAAG,gBAAgBX,EAAIW,GAAG,QAAQP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,uCAAuC,CAACN,EAAIW,GAAG,YAAYX,EAAIW,GAAG,iEAAiEP,EAAG,IAAI,CAACJ,EAAIW,GAAG,mDAAmDP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,+BAA+B,CAACN,EAAIW,GAAG,gCAAgCX,EAAIW,GAAG,QAAQP,EAAG,IAAI,CAACJ,EAAIW,GAAG,oDCiC/qC,IACEikB,QADF,WAEI/kB,OAAOmjB,iBAAiB,UAAW/iB,KAAK4kB,gBAE1CC,cAJF,WAKIjlB,OAAOklB,oBAAoB,UAAW9kB,KAAK4kB,gBAE7C/D,QAAS,CACP6D,QADJ,WAEM1kB,KAAK4jB,MAAM,UAEbgB,cAJJ,SAIA,GACsB,KAAZzR,EAAEsR,OACZ,kBC/CoS,MCOhS,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAI1kB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIW,GAAG,sBAAsBP,EAAG,IAAI,CAACM,YAAY,YAAYJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAI2kB,QAAQ5jB,MAAW,CAACX,EAAG,MAAM,CAACM,YAAY,2BAA2BJ,MAAM,CAAC,MAAQ,6BAA6B,MAAQ,KAAK,OAAS,KAAK,QAAU,YAAY,KAAO,OAAO,OAAS,eAAe,eAAe,IAAI,iBAAiB,QAAQ,kBAAkB,UAAU,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,KAAK,EAAI,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,KAAK,GAAK,IAAI,GAAK,IAAI,GAAK,QAAQF,EAAG,OAAO,CAACE,MAAM,CAAC,GAAK,IAAI,GAAK,IAAI,GAAK,KAAK,GAAK,YAAYF,EAAG,IAAI,CAACJ,EAAIW,GAAG,6EAA6EX,EAAIS,GAAG,GAAGT,EAAIW,GAAG,iCAAiCP,EAAG,MAAMJ,EAAIW,GAAG,kBAC51B,GAAkB,CAAC,WAAa,IAAIX,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,KAAK,CAACA,EAAG,KAAK,CAACJ,EAAIW,GAAG,sBAAsBP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,mCAAmC,CAACN,EAAIW,GAAG,gBAAgBX,EAAIW,GAAG,QAAQP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,uCAAuC,CAACN,EAAIW,GAAG,YAAYX,EAAIW,GAAG,wJAAwJP,EAAG,KAAK,CAACJ,EAAIW,GAAG,+GAA+GP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,0EAA0E,OAAS,WAAW,CAACN,EAAIW,GAAG,UAAUX,EAAIW,GAAG,QAAQP,EAAG,KAAK,CAACJ,EAAIW,GAAG,sEAAsEP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,0CAA0C,OAAS,WAAW,CAACN,EAAIW,GAAG,UAAUX,EAAIW,GAAG,QAAQP,EAAG,KAAK,CAACJ,EAAIW,GAAG,mFAAmFP,EAAG,IAAI,CAACM,YAAY,SAASJ,MAAM,CAAC,KAAO,+BAA+B,CAACN,EAAIW,GAAG,sCCgCjtC,IACEikB,QADF,WAEI/kB,OAAOmjB,iBAAiB,UAAW/iB,KAAK4kB,gBAE1CC,cAJF,WAKIjlB,OAAOklB,oBAAoB,UAAW9kB,KAAK4kB,gBAE7C/D,QAAS,CACP6D,QADJ,WAEM1kB,KAAK4jB,MAAM,UAEbgB,cAJJ,SAIA,GACsB,KAAZzR,EAAEsR,OACZ,kBC9C0S,MCOtS,GAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,gCClBX,GAAS,WAAa,IAAI1kB,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,IAAI,CAACM,YAAY,0BAA0BJ,MAAM,CAAC,KAAO,KAAKQ,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBhB,EAAIglB,gBAAgBjkB,MAAW,CAACX,EAAG,MAAM,CAACM,YAAY,UAAU,CAACN,EAAG,OAAO,CAACJ,EAAIW,GAAG,KAAKX,EAAIY,GAAGZ,EAAIzB,SAAUyB,EAAW,QAAEI,EAAG,OAAO,CAACM,YAAY,qBAAqB,CAACV,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIilB,QAAQC,aAAa,cAAcllB,EAAIY,GAAGZ,EAAIilB,QAAQE,QAAQ,aAAanlB,EAAIQ,OAAQR,EAAW,QAAEI,EAAG,gBAAgBJ,EAAIQ,KAAMR,EAAIilB,SAAWjlB,EAAIilB,QAAQG,MAAOhlB,EAAG,MAAM,CAACM,YAAY,iBAAiBJ,MAAM,CAAC,IAAMN,EAAIilB,QAAQG,MAAMC,QAAQrlB,EAAIQ,KAAMR,EAAW,QAAEI,EAAG,MAAM,CAACM,YAAY,QAAQ,CAACV,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIilB,QAAQK,gBAAgBtlB,EAAIQ,MAAM,IAC7uB,GAAkB,GCDlB,GAAS,WAAa,IAAIR,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACM,YAAY,SAASJ,MAAM,CAAC,MAAQ,6BAA6B,QAAU,YAAY,MAAQ,KAAK,OAAS,KAAK,KAAO,UAAU,CAACF,EAAG,OAAO,CAACE,MAAM,CAAC,QAAU,MAAM,EAAI,2FAA2FF,EAAG,OAAO,CAACE,MAAM,CAAC,EAAI,uDAAuD,CAACF,EAAG,mBAAmB,CAACE,MAAM,CAAC,cAAgB,YAAY,KAAO,SAAS,KAAO,UAAU,GAAK,YAAY,IAAM,OAAO,YAAc,iBAAiB,MACjlB,GAAkB,GCAlBilB,GAAS,GAKT,GAAY,gBACdA,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QCGf,IACEhnB,KAAM,eACNsiB,MAAO,CAAC,QACR2E,WAAY,CACVC,YAAJ,IAEEtpB,KANF,WAOI,MAAO,CACLupB,SAAS,EACTT,QAAS,OAGbvB,MAAO,CACLnlB,KADJ,WAEM0B,KAAK0lB,qBAGTf,QAjBF,WAkBI3kB,KAAK0lB,oBAEP7E,QAAS,CACPkE,gBADJ,WAEM,EAAN,qCAEIW,iBAJJ,WAIA,WACA,YACM1lB,KAAKglB,QAAU,KACfhlB,KAAKylB,SAAU,EACfhgB,MAAM,4BAA8BkgB,EAAc,cAAe,CAAvE,cACA,kBAAQ,OAAR,YACA,kBACQ,GAAR,WAAQ,CACA,IAAR,SACA,uBACA,0BACA,mBACA,uBACQ,EAAR,WACQ,IAAR,OACA,+BACQ,GAAR,GACU,IAAV,0CACU,EAAV,CACY,KAAZ,gBACY,OAAZ,wBAGA,iCACU,EAAV,MAEQ,EAAR,SACU,YAAV,EAAU,YAAV,EAAU,YAAV,EAAU,OAAV,EAAU,MAAV,UCvE6R,MCQzR,I,UAAY,gBACd,GACA,GACA,IACA,EACA,KACA,KACA,OAIa,M,QCnBA,SAASC,GAA+BC,GACrDjmB,OAAOmjB,iBAAiB,YAAa+C,GAAkB,GACvDlmB,OAAOmjB,iBAAiB,QAAS+C,GAAkB,GACnDlmB,OAAOmjB,iBAAiB,aAAc+C,GAAkB,GACxDlmB,OAAOmjB,iBAAiB,UAAW+C,GAAkB,GAErD,IAAIC,GAAS,EAEb,OAAOrhB,EAEP,SAASohB,IACHC,IACJA,GAAS,EACTF,KAGF,SAASnhB,IACP9E,OAAOklB,oBAAoB,YAAagB,GAAkB,GAC1DlmB,OAAOklB,oBAAoB,QAASgB,GAAkB,GACtDlmB,OAAOklB,oBAAoB,aAAcgB,GAAkB,GAC3DlmB,OAAOklB,oBAAoB,UAAWgB,GAAkB,ICkE5D,QACEP,WAAY,CACVS,QAAJ,GACIC,UAAJ,GACIC,UAAJ,KACIC,QAAJ,GACIC,cAAJ,GACIC,aAAJ,IAEE/nB,KAAM,MACNuiB,QAAS,CACPvf,YADJ,WAEMtB,KAAKwN,MAAMlM,YAAYtB,KAAKmB,WACxBmlB,OAEFtmB,KAAKiC,aAAejC,KAAKmB,UACzBnB,KAAKmB,UAAY,OAGrBS,cATJ,SASA,GACMH,EAASC,MAAQqK,EACjB/L,KAAKwB,YAEPK,4BAbJ,SAaA,GACMJ,EAASqN,oBAAqB,EAC1BwX,MAAmBtmB,KAAKmB,YAE1BgjB,EAAQC,eAAgB,EACxBpkB,KAAKmB,UAAY,KACjBnB,KAAKwN,MAAMsO,UAGf/Z,iBAtBJ,WAuBM/B,KAAKumB,kBAAmB,EACxB9kB,EAASqN,oBAAqB,GAEhC1N,aA1BJ,SA0BA,GACM+R,EAAEpS,iBACFf,KAAK8B,wBAEPW,gBA9BJ,WA+BMzC,KAAK2B,gBAAiB,EACtB3B,KAAKkC,gBAAiB,GAExBF,eAlCJ,WAmCMhC,KAAKkC,gBAAiB,GAExBJ,qBArCJ,WAsCM9B,KAAKmB,UAAY,KACjBnB,KAAKiC,aAAe,KACpBR,EAASC,MAAQ,GACjBD,EAASuN,UAAUvN,EAASC,OAC5B,EAAN,iBAEI8kB,YA5CJ,SA4CA,GAEQxmB,KAAKqC,QADH8Q,GAGa,MAGnB3R,SAnDJ,WAoDM,EAAN,2BACMC,EAASuN,UAAUvN,EAASC,OAC5B1B,KAAKiB,aAAe,MAEtBD,oBAxDJ,WAyDM,EAAN,+CAEIE,eA3DJ,WA4DM,EAAN,sBACMlB,KAAKiB,aAAe,MAEtBwlB,cA/DJ,SA+DA,KACUH,OAAoBI,EACtB1mB,KAAKiC,aAAed,GAEpBnB,KAAKiC,aAAe,KACpBjC,KAAKmB,UAAYA,GAEnBM,EAASC,MAAQP,EACjBnB,KAAKqC,QAAU,KACfZ,EAASuN,UAAUvN,EAASC,QAG9BmB,YA3EJ,SA2EA,cACUsD,GAAYA,EAASmB,WAElBtH,KAAKumB,mBACRvmB,KAAKY,gBAAkBuF,EAASoH,MAAQ,mCAAqC,qCAE/EvN,KAAKuB,aAAc,EACnBvB,KAAK2mB,qBAAuBf,IAA+B,WACzDjiB,YAAW,WAArB,yCAEA,mBACQ3D,KAAKY,gBAAkB,KACvBZ,KAAKiB,aAAekF,EAASlF,cACrC,IACQjB,KAAKY,gBAAkBuF,EAASnB,QAChChF,KAAK4mB,mBAAqB,QAIhC1qB,KAxGF,WAyGI,MAAO,CACLgG,gBAAgB,EAChB5B,gBAAgB,EAChBimB,kBAAkB,EAClBlkB,QAAS,KACTpB,aAAc,KACdE,UAAW,KACXc,aAAc,KACdN,gBAAgB,EAChBf,gBAAiB,GACjBW,aAAa,EACbE,SAAN,IAGEkjB,QAvHF,WAwHI,IAAJ,iCAEI,GADA3kB,KAAKM,eAAiB,OAA1B,OAA0B,CAA1B,GACSN,KAAKM,eAAV,CAEA,IAAJ,OACA,kBACIumB,EAAYhL,QAAQsB,GACpBnd,KAAKwN,MAAQqZ,EAEb,EAAJ,oCACI,EAAJ,wCACI,EAAJ,kCAGEhC,cAtIF,WAuIQ7kB,KAAKwN,OACPxN,KAAKwN,MAAM9I,UAET1E,KAAK2mB,sBACP3mB,KAAK2mB,uBAEP,EAAJ,qCACI,EAAJ,yCACI,EAAJ,mCAIA,SAASL,KACP,OAAO1mB,OAAOknB,WAAa,IC1OuP,UCQhR,I,UAAY,gBACd,GACA,EACApkB,GACA,EACA,KACA,KACA,OAIa,M,QChBfqkB,aAAIC,OAAOC,eAAgB,EAE3B,IAAIF,aAAI,CACNG,OAAQ,SAAAzI,GAAC,OAAIA,EAAE0I,OACdC,OAAO,S,oCCPV,W","file":"js/app.2b324c28.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[(!_vm.isWebGLEnabled)?_c('div',[_vm._m(0)]):_vm._e(),(_vm.isWebGLEnabled)?_c('div',[_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.progressMessage)?_c('div',{staticClass:\"progress\"},[_vm._v(_vm._s(_vm.progressMessage))]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.subgraphName)?_c('div',{staticClass:\"progress subgraph\"},[_vm._v(\" Only \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubgraphRootClick($event)}}},[_vm._v(\"/r/\"+_vm._s(_vm.subgraphName))]),_vm._v(\" related subreddits are shown. \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onExitSubgraph($event)}}},[_vm._v(\"view all\")])]):_vm._e()]),(_vm.subreddit)?_c('subreddit',{staticClass:\"preview\",attrs:{\"name\":_vm.subreddit},on:{\"declineAge\":_vm.onDeclineAge}},[_c('template',{slot:\"after-title\"},[_c('div',[(_vm.graphLoaded)?_c('a',{staticClass:\"subreddit-action\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showRelated($event)}}},[_vm._v(\"Show related\")]):_vm._e(),(!_vm.graphLoaded)?_c('span',{staticClass:\"subreddit-action\"},[_vm._v(\"the map is still loading...\")]):_vm._e()])])],2):_vm._e(),_c('form',{staticClass:\"search-box\",on:{\"submit\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[_c('typeahead',{attrs:{\"placeholder\":\"Find subreddit\",\"showClearButton\":_vm.subreddit,\"query\":_vm.appState.query},on:{\"menuClicked\":function($event){_vm.sidebarVisible = true},\"selected\":_vm.findSubreddit,\"beforeClear\":_vm.closeSubredditOnSmallScreen,\"cleared\":_vm.closeSubredditViewer,\"inputChanged\":_vm.onTypeAheadInput}})],1),_c('a',{staticClass:\"accent improve\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onImproveClick($event)}}},[_vm._v(\"Improve this map\")]),_c('transition',{attrs:{\"name\":\"slide-bottom\"}},[(_vm.smallPreview)?_c('small-preview',{staticClass:\"small-preview\",attrs:{\"name\":_vm.smallPreview}}):_vm._e()],1),_c('transition',{attrs:{\"name\":\"slide-top\"}},[(_vm.improveVisible)?_c('improve-window',{staticClass:\"improve-window\",on:{\"close\":function($event){_vm.improveVisible = false}}}):_vm._e()],1),(_vm.tooltip)?_c('tooltip',{staticClass:\"tooltip\",style:({\n    left: _vm.tooltip.x + 'px',\n    top: _vm.tooltip.y + 'px'\n  }),attrs:{\"data\":_vm.tooltip}}):_vm._e(),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.sidebarVisible || _vm.improveVisible)?_c('div',{staticClass:\"backdrop\",on:{\"click\":_vm.onBackdropClick}}):_vm._e()]),_c('transition',{attrs:{\"name\":\"slide-left\"}},[(_vm.sidebarVisible)?_c('sidebar',{on:{\"close\":function($event){_vm.sidebarVisible = false}}}):_vm._e()],1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"absolute no-webgl\"},[_c('h4',[_vm._v(\"WebGL is not enabled :(\")]),_c('p',[_vm._v(\"This website needs \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://en.wikipedia.org/wiki/WebGL\"}},[_vm._v(\"WebGL\")]),_vm._v(\" to render a map of reddit. \")]),_vm._v(\" \"),_c('p',[_vm._v(\" You can try another browser. If the problem persists - very likely your video card isn't supported. \")])])}]\n\nexport { render, staticRenderFns }","import eventify from 'ngraph.events';\n\nconst bus = eventify({});\n\nexport default bus;\n\nexport function setProgress(msg) {\n    bus.fire('progress', msg());\n}","\nexport function debounce(cb, ms, self) {\n  let lastCall = new Date();\n  let handle;\n\n  return function() {\n    let time = new Date();\n    let elapsed = time - lastCall;\n    clearTimeout(handle);\n    if (elapsed > ms) {\n      cb.apply(self, arguments)\n    } else {\n      lastCall = time;\n      handle = setTimeout(cb, ms, arguments)\n    }\n  }\n}\n\nexport function formatNumber(x) {\n  return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}","import eventify from 'ngraph.events';\nimport createGraph from 'ngraph.graph';\nimport {createStreamingSVGParser} from 'streaming-svg-parser';\nimport {setProgress} from './bus';\nimport {formatNumber} from './utils';\n\nexport default function createSVGLoader(url) {\n  let disposed = false;\n  let graph = createGraph();\n  let parseSVGAsync = createStreamingSVGParser(notifyTagOpen, notifyTagClose, true)\n\n  let api = eventify({load, dispose, getGraph() { return graph; }});\n  return api;\n\n  function dispose() {\n    disposed = true;\n  }\n\n  function load() {\n    let start = window.performance.now();\n    fetch(url, {mode: 'cors'}).then(response => {\n      let fetchReader = response.body.getReader();\n      let decoder = new TextDecoder();\n\n      return fetchReader.read().then(processData);\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = (progress.value !== undefined && decoder.decode(progress.value, {stream: !progress.done})) || '';\n        return parseSVGAsync(chunk).then(() => {\n          if(progress.done) {\n            return;\n          }\n          return fetchReader.read().then(processData);\n        });\n      }\n    }).then(() => {\n      console.log('Elapsed: ', window.performance.now() - start);\n      setProgress(() => ({\n        message: 'Loading links...'\n      }));\n      // now the svg file is loaded. Let's load secondary information\n      return fetch(getPathTo('node-ids.txt'), {mode: 'cors'}).then(response => response.text()).then(txt => {\n        let labels = txt.split('\\n');\n        labels.forEach(label => graph.addNode(label));\n        return labels;\n      });\n    }).then((labels) => {\n      // now load the edges:\n      let fromId, fetchReader, prevBuffer, weight;\n      return fetch(getPathTo('links.bin'), {mode: 'cors'})\n      .then(response => {\n        fetchReader = response.body.getReader();\n        return fetchReader.read().then(processData);\n      });\n\n      function processData(progress) {\n        if (disposed) return;\n\n        let chunk = progress.value;\n        if (!chunk && prevBuffer) {\n          throw new Error('Incomplete response');\n        }\n        if (!chunk) {\n          setProgress(() => ({\n            mapLoaded: true,\n          }));\n          return graph;\n        }\n\n        if (prevBuffer) {\n          let tmp = new Uint8Array(prevBuffer.byteLength + chunk.byteLength);\n          tmp.set(new Uint8Array(prevBuffer), 0);\n          tmp.set(new Uint8Array(chunk), prevBuffer.byteLength);\n          chunk = tmp;\n          prevBuffer = null;\n        }\n        let lastAvailableByte = Math.floor(chunk.byteLength / 4) * 4;\n        if (chunk.byteLength % 4 !== 0) {\n          prevBuffer = chunk.slice(lastAvailableByte);\n        }\n        const view = new DataView(chunk.buffer);\n        for (let i = 0; i < lastAvailableByte; i += 4) {\n          let linkId = view.getInt32(i, /* little endian = */ true);\n          if (linkId < 0) {\n            fromId = -linkId - 1;\n            weight = 1;\n            graph.addNode(labels[fromId]);\n          } else {\n            let toId = linkId - 1;\n            graph.addLink(labels[fromId], labels[toId], weight)\n            weight += 1;\n          }\n        }\n\n        if (progress.done) {\n          setProgress(() => ({\n            mapLoaded: true\n          }));\n          return graph;\n        }\n        setProgress(getLinksCount);\n        return fetchReader.read().then(processData);\n      }\n    });\n\n    function getLinksCount() {\n      return {\n        message: 'Loaded ' + formatNumber(graph.getLinkCount()) + ' relationship records'\n      }\n    }\n\n    function getPathTo(name) {\n      if (url.indexOf('http') < 0) return name;\n      let baseUrl = new URL(url);\n      baseUrl.pathname = baseUrl.pathname.substr(0, baseUrl.pathname.lastIndexOf('/') + 1) + name;\n      return baseUrl.toString();\n    }\n\n    return api;\n  }\n\n  function notifyTagOpen(element) {\n    api.fire('element-start', element);\n  }\n\n  function notifyTagClose(element) {\n    api.fire('element-end', element)\n  }\n\n}","\nimport {GLCollection, defineProgram, ColorAttribute, InstancedAttribute} from 'w-gl';\n\nexport default class PointCollection extends GLCollection {\n  constructor(gl) {\n    let program = defineProgram({\n      gl,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute float size;\n  attribute vec3 position;\n  attribute vec4 color;\n\n  attribute vec2 point; // instanced\n\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    gl_Position = modelViewProjection * vec4(position + vec3(point * size, 0.), 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n    vPoint = point;\n  }`,\n\n      fragment: `\n  precision highp float;\n  varying vec4 vColor;\n  varying vec2 vPoint;\n  void main() {\n    float dist = length(vPoint);\n    if (dist >= 0.5) {discard;}\n    gl_FragColor = vColor;\n  }`,\n      // These are just overrides:\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n        point: new InstancedAttribute([\n          -0.5, -0.5, -0.5,  0.5, 0.5,  0.5,\n          0.5,  0.5, 0.5, -0.5, -0.5, -0.5,\n        ])\n      },\n\n      preDrawHook(/* programInfo */) {\n        return `gl.enable(gl.DEPTH_TEST);\n        gl.depthFunc(gl.LEQUAL);`;\n      },\n      postDrawHook() {\n        return 'gl.disable(gl.DEPTH_TEST);';\n      },\n    });\n\n    super(program);\n    this.opacity = 1;\n  }\n  draw() {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n}","import earcut from 'earcut';\nimport {defineProgram, ColorAttribute, GLCollection} from 'w-gl';\n\nexport default class PolyLineCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    let program = defineProgram({\n      gl,\n      debug: options.debug,\n      vertex: `\n  uniform mat4 modelViewProjection;\n  uniform float opacity;\n\n  attribute vec2 point;\n  attribute vec4 color;\n  varying vec4 vColor;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(point, -1.0, 1.0);\n    vColor = color.abgr;\n    vColor[3] *= opacity;\n  }`,\n\n      fragment: `\n  precision highp float;\n\n  varying vec4 vColor;\n\n  void main() {\n    gl_FragColor = vColor;\n  }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n    });\n    super(program);\n    this.opacity = options.opacity === undefined ? 1 : options.opacity;\n    this.color = options.color || 0x000000ff;\n  }\n\n  draw() {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n    this.program.draw(this.uniforms);\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  addPolygon({ polygon, color }) {\n    polygon = polygon.flat();\n    let triangles = earcut(polygon);\n    for (let i = 0; i < triangles.length; i++) {\n      let index = triangles[i] * 2;\n      this.add({\n        point: [polygon[index], polygon[index + 1]],\n        color: color || this.color,\n      });\n    }\n\n    for (let i = 0; i < 3; ++i) {\n      this.add({\n        point: [0, 0],\n        color: 0x0,\n      });\n    }\n  }\n}\n","import { defineProgram, InstancedAttribute, GLCollection } from 'w-gl';\n\nexport default class MSDFTextCollection extends GLCollection {\n  constructor(gl, options = {}) {\n    gl.getExtension('OES_standard_derivatives');\n\n    super(getTextProgram(gl, options));\n\n    let img = (this.msdfImage = new Image());\n    img.crossOrigin = 'Anonymous';\n    this.isReady = false;\n    this.queue = [];\n    this.fontSize = options.fontSize || 2;\n    this.opacity = options.opacity !== undefined ? options.opacity : 1;\n    this.fontInfo = null;\n\n    let fontPath = 'fonts';\n    fetch(`${fontPath}/Roboto.json`, { mode: 'cors' })\n      .then((x) => x.json())\n      .then((fontInfo) => {\n        this.fontInfo = fontInfo;\n        this.alphabet = new Map();\n        fontInfo.chars.forEach((char) => {\n          let charValue = String.fromCharCode(char.id);\n          this.alphabet.set(charValue, char);\n        });\n\n        this.msdfImage.onload = () => {\n          this._sdfTextureChanged = true;\n          this.program.setTextureCanvas('msdf', this.msdfImage);\n          this.isReady = true;\n          this.sdfTextureWidth = img.width;\n          this.sdfTextureHeight = img.height;\n\n          this.queue.forEach((q) => this.addText(q));\n          this.queue = [];\n        };\n        this.msdfImage.src = `${fontPath}/Roboto0.png`;\n      });\n  }\n\n  clear() {\n    this.program.setCount(0);\n  }\n\n  draw(/* gl, drawContext */) {\n    if (!this.uniforms) {\n      this.uniforms = {\n        modelViewProjection: this.modelViewProjection,\n        color: [0.9, 0.9, 0.9, 1.0],\n        bias: 0.5,\n        opacity: this.opacity\n      };\n    }\n    this.uniforms.opacity = this.opacity;\n\n    // This draws text outline\n    this.uniforms.color[0] = 0.2;\n    this.uniforms.color[1] = 0.4;\n    this.uniforms.color[2] = 0.8;\n    this.uniforms.color[3] = 0.8;\n    this.uniforms.bias = 0.35;\n    this.program.draw(this.uniforms);\n\n    // This draws text itself\n    this.uniforms.color[0] = 0.9;\n    this.uniforms.color[1] = 0.9;\n    this.uniforms.color[2] = 0.9;\n    this.uniforms.color[3] = 1;\n    this.uniforms.bias = 0.5;\n    this.program.draw(this.uniforms);\n  }\n\n  stress(x, y) {\n    let dy = 0;\n    fetch(\n      'https://raw.githubusercontent.com/mmcky/nyu-econ-370/master/notebooks/data/book-war-and-peace.txt'\n    )\n      .then((b) => b.text())\n      .then((text) => {\n        let lineCount = 0;\n        text.split('\\n').forEach((line) => {\n          this.addText({ text: line, x, y: y + dy });\n          dy -= this.fontSize;\n          lineCount += 1;\n          if (lineCount > 1000) {\n            lineCount = 0;\n            x += 80;\n            dy = 0;\n          }\n        });\n      });\n  }\n\n  addText(textInfo) {\n    if (!this.isReady) {\n      this.queue.push(textInfo);\n      return;\n    }\n    let { text, x = 0, y = 0, z = 0 } = textInfo;\n    if (text === undefined) {\n      throw new Error('Text is not defined in ' + textInfo);\n    }\n    let dx = 0;\n    let fontSize = textInfo.fontSize || this.fontSize;\n    if (textInfo.limit !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n        w += sdfPos.xadvance;\n      }\n      fontSize = (textInfo.limit * this.fontInfo.info.size) / w;\n    }\n\n    let scale = fontSize / this.fontInfo.info.size;\n    if (textInfo.cx !== undefined) {\n      let w = 0;\n      for (let char of text) {\n        let sdfPos = this.alphabet.get(char);\n        if (!sdfPos) continue;\n\n        w += sdfPos.xadvance;\n      }\n      dx -= w * textInfo.cx * scale;\n    }\n    if (textInfo.cy !== undefined) {\n      y += fontSize * textInfo.cy;\n    }\n\n    for (let char of text) {\n      let sdfPos = this.alphabet.get(char);\n      if (!sdfPos) {\n        console.error(char + ' is missing in the font');\n        continue;\n      }\n\n      this.add({\n        position: [x + dx, y - sdfPos.yoffset * scale, z],\n        charSize: [\n          (fontSize * sdfPos.width) / 42,\n          (-fontSize * sdfPos.height) / 42,\n        ],\n        texturePosition: [\n          sdfPos.x / this.sdfTextureWidth,\n          1 - sdfPos.y / this.sdfTextureHeight,\n          sdfPos.width / this.sdfTextureWidth,\n          -sdfPos.height / this.sdfTextureHeight,\n        ],\n      });\n      dx += sdfPos.xadvance * scale;\n    }\n    if (this.scene) this.scene.renderFrame();\n  }\n}\n\nfunction getTextProgram(gl, options) {\n  return defineProgram({\n    capacity: options.capacity || 1,\n    buffer: options.buffer,\n    debug: options.debug,\n    gl,\n    vertex: `\n  uniform mat4 modelViewProjection;\n  uniform vec4 color;\n\n  // Position of the text character:\n  attribute vec3 position;\n  // Instanced quad coordinate:\n  attribute vec2 point;\n  attribute vec2 charSize;\n  // [x, y, w, h] - of the character in the msdf texture;\n  attribute vec4 texturePosition;\n\n  varying vec2 vPoint;\n\n  void main() {\n    gl_Position = modelViewProjection * vec4(\n      position + vec3(\n        vec2(point.x, point.y) * charSize,\n        position.z),\n      1.);\n    vPoint = texturePosition.xy + point * texturePosition.zw;\n  }`,\n\n    fragment: `\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n#endif\n  precision highp float;\n  varying vec2 vPoint;\n\n  uniform vec4 color;\n  uniform float bias;\n  uniform float opacity;\n  uniform sampler2D msdf;\n\n  float median(float r, float g, float b) {\n    return max(min(r, g), min(max(r, g), b));\n  }\n\n  void main() {\n    vec3 sample = texture2D(msdf, vPoint).rgb;\n    float sigDist = median(sample.r, sample.g, sample.b) - bias;\n    float alpha = clamp(sigDist / fwidth(sigDist) + bias, 0.0, 1.0);\n    gl_FragColor = vec4(color.rgb, color.a * alpha * opacity);\n  }`,\n    instanced: {\n      point: new InstancedAttribute([0, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 1]),\n    },\n  });\n}\n","const fuzzysort = require('fuzzysort')\n\nexport default function createFuzzySearcher() {\n  let words = [];\n  let api = {\n    addWord,\n    find\n  }\n\n  return api;\n\n  function addWord(word) {\n    words.push(word);\n  }\n\n  function find(query) {\n    let promise = fuzzysort.goAsync(query, words, {limit: 10})\n\n    return promise.then(results => {\n      return results.map(x => ({\n        html: fuzzysort.highlight(x, '<b>', '</b>'),\n        text: x.target\n      }));\n    }); \n    // if(invalidated) promise.cancel()\n  }\n}","let qs = require('query-state')\nlet state = qs.instance({}, {useSearch: true})\nlet pendingSave;\n\nexport default {\n  query: state.get('q') || '',\n  userTypedSomething: false,\n\n  getFilePath() {\n    return state.get('graph') || 'https://anvaka.github.io/map-of-reddit-data/graph.svg';\n  },\n  saveQuery(newQuery) {\n    if (newQuery) {\n      state.set({q: newQuery});\n    } else {\n      state.unset('q');\n    }\n  },\n  getQueryState() {\n    return state;\n  },\n  getCameraPosition() {\n    let coordinates = ['x', 'y', 'z'].map(name => {\n      let v = Number.parseFloat(state.get(name));\n      if (Number.isFinite(v)) return v;\n    }).filter(x => x !== undefined);\n    if (coordinates.length === 3) return coordinates;\n  },\n  saveScenePosition(scene) {\n    if (pendingSave) {\n      clearTimeout(pendingSave);\n      pendingSave = 0;\n    }\n\n    pendingSave = setTimeout(() => {\n      pendingSave = 0;\n      let dc = scene.getDrawContext();\n      let [x, y, z] = dc.view.position;\n      let position = {x, y, z}\n      state.set(position);\n    }, 300);\n  }\n}","export const Colors = {\n  PRIMARY_HIGHLIGHT_COLOR: 0xBF2172ff,\n  SECONDARY_HIGHLIGHT_COLOR: 0xE56BAAff,\n  TERNARY_COLOR: 0xdcdcdcff,\n  TERNARY_LINK: 0x88888844\n};\n\nexport const LayerLevels = {\n  Polygons: 0,\n  Edges: 5,\n  HighlightedEdges: 7,\n  Nodes: 10,\n  Text: 15\n}\n\nexport const NamedGroups = {\n  MainGraph: 'main-graph-view'\n}","import {GLCollection, defineProgram, InstancedAttribute, ColorAttribute} from 'w-gl';\n\n// Note: the shader has a bug with z coordinate of the arrow. I'm still keeping it and maybe will get back\n// to it later\nexport default class LineCollection extends GLCollection {\n    constructor(gl, options) {\n      let program = defineProgram({\n        gl,\n        vertex: `\nuniform mat4 modelViewProjection;\nuniform float width;\n\nattribute vec3 from, to;\nattribute vec2 point;\nattribute vec4 color;\nvarying vec2 vPoint;\nvarying vec4 vColor;\n\nvoid main() {\n  vec2 xBasis = normalize(to - from).xy;\n  vec2 yBasis = vec2(-xBasis.y, xBasis.x);\n  vec4 clip0 = modelViewProjection * vec4(from.xy + width * yBasis * point.x, from.z, 1.0);\n  vec4 clip1 = modelViewProjection * vec4(to.xy + width * yBasis * point.x, to.z, 1.0);\n  gl_Position = mix(clip0, clip1, point.y);\n  vColor = color;\n}`,\n\n        fragment: `\n    precision highp float;\n    varying vec4 vColor;\n\n    void main() {\n      gl_FragColor = vColor.abgr;\n    }`,\n      attributes: {\n        color: new ColorAttribute(),\n      },\n      instanced: {\n          point: new InstancedAttribute([\n            -0.5, 0, -0.5, 1, 0.5, 1, // First 2D triangle of the quad\n            -0.5, 0, 0.5, 1, 0.5, 0   // Second 2D triangle of the quad\n          ])\n        }\n      });\n      super(program);\n      this.width = (options && options.width) || 1;\n    }\n\n    draw() {\n      if (!this.uniforms) {\n        this.uniforms = {\n          modelViewProjection: this.modelViewProjection,\n          width: this.width,\n        }\n      }\n      this.uniforms.width = this.width;\n      this.program.draw(this.uniforms);\n    }\n    // add(line) {\n    //   if (line.width === undefined) line.width = this.width;\n    //   super.add(line);\n    // }\n\n    clear() {\n      this.program.setCount(0);\n    }\n  }","/**\n * This class is responsible for finding nodes under cursor\n */\nimport RBush from 'rbush';\nimport knn from 'rbush-knn';\nimport bus from './bus';\nimport LineCollection from './LineCollection';\nimport PointCollection from './PointCollection';\nimport {LayerLevels} from './constants';\n\nexport default function createPointerEventsHandler(sceneLayerManager, options) {\n  const spatialIdex = new RBush();\n  let moved = false;\n  let isPaused = false;\n  const scene = sceneLayerManager.getScene();\n\n  scene.on('click', handleClick);\n  scene.on('mousemove', handleMove);\n  scene.on('transform', handleTransform);\n\n  const highlightedNodes = new PointCollection(scene.getGL());\n  const firstLevelArrows = new LineCollection(scene.getGL(), {width: 60});\n  const secondLevelArrows = new LineCollection(scene.getGL(), {width: 20});\n\n  sceneLayerManager.addToLayer(secondLevelArrows, LayerLevels.Edges);\n  sceneLayerManager.addToLayer(firstLevelArrows, LayerLevels.HighlightedEdges);\n  sceneLayerManager.addToLayer(highlightedNodes, LayerLevels.Nodes);\n\n  if (options.elementsGroupName) {\n    sceneLayerManager.addToNamedGroup(firstLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(secondLevelArrows, options.elementsGroupName);\n    sceneLayerManager.addToNamedGroup(highlightedNodes, options.elementsGroupName);\n  }\n\n  return {\n    addNode,\n    clearHighlights,\n    focusUI,\n    dispose,\n    setPaused\n  }\n\n  function handleTransform(dc) {\n    // TODO:\n    // if (cameraZPosition < 80) {\n    //   // force camera to not go closer:\n    //   scene.view.position[2] = 80;\n    //   scene.getCamera().setViewBox();\n    // }\n\n    let cameraZPosition = dc.view.position[2];\n    let z = Math.min(cameraZPosition, 8000);\n    firstLevelArrows.width = Math.max(1, 60 * z / 8000);\n    secondLevelArrows.width = Math.max(1, 20 * z / 8000);\n    moved = true;\n    if (options && options.onTransform) options.onTransform();\n  }\n\n  function clearHighlights() {\n    firstLevelArrows.clear();\n    secondLevelArrows.clear();\n    highlightedNodes.clear();\n  }\n\n  function focusUI(ui) {\n    if (ui !== undefined) {\n      bus.fire('show-subreddit', ui.name);\n    }\n    let graph = options && options.getGraph && options.getGraph();\n    if (!ui && !moved && graph) {\n      clearHighlights();\n      bus.fire('show-subreddit', null);\n      scene.renderFrame();\n    }\n\n    moved = false;\n\n    if (ui) {\n      clearHighlights();\n\n      options.getHighlightedLinks(ui).forEach(linkUI => {\n        let links = linkUI.isFirstLevel ? firstLevelArrows : secondLevelArrows;\n        links.add(linkUI);\n      });\n      options.getHighlightedNodes(ui).forEach(nodeUI => highlightedNodes.add(nodeUI));\n\n      scene.renderFrame();\n    } \n  }\n\n  function addNode(ui) {\n    let position = ui.position;\n    let r = ui.size / 2;\n\n    spatialIdex.insert({\n      minX: position[0] - r,\n      minY: position[1] - r,\n      maxX: position[0] + r,\n      maxY: position[1] + r,\n      ui,\n    });\n  }\n\n  function dispose() {\n    scene.removeChild(firstLevelArrows);\n    scene.removeChild(secondLevelArrows);\n    scene.removeChild(highlightedNodes);\n\n    scene.off('click', handleClick);\n    scene.off('mousemove', handleMove);\n    scene.off('transform', handleTransform);\n  }\n\n  function handleClick(e) {\n    let ui = findNearest(e.x, e.y);\n    focusUI(ui);\n  }\n\n  function setPaused(newIsPaused) {\n    isPaused = newIsPaused;\n  }\n\n  function handleMove(e) {\n    if (isPaused) return;\n\n    let ui = findNearest(e.x, e.y);\n    if (ui !== undefined) {\n      bus.fire('show-tooltip', {\n        x: e.originalEvent.clientX,\n        y: e.originalEvent.clientY,\n        data: ui.name,\n      });\n      return;\n    }\n\n    bus.fire('show-tooltip', null);\n  }\n\n  function findNearest(x, y) {\n    const neighborIds = knn(spatialIdex, x, y, 1);\n    let neighbor = neighborIds[0];\n    if (neighbor === undefined) return;\n    let ui = neighbor.ui;\n\n    let [uiX, uiY] = ui.position;\n    let dist = Math.hypot(x - uiX, y - uiY);\n    if (dist < ui.size / 2) return ui;\n  }\n}","import PointCollection from './PointCollection';\nimport TextCollection from './MSDFTextCollection';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport bus, {setProgress} from './bus';\n\nconst createLayout = require('ngraph.forcelayout');\n\nconst Easing = {\n  easeInQuart(x) {\n    return x * x * x * x;\n  }\n}\n\nexport default function createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI) {\n  let layout;\n  let raf;\n  let MAX_FRAMES = 400;\n  let renderCount = 0;\n\n  const ourNodeNameToUI = new Map();\n  const scene = sceneLayerManager.getScene();\n  const points = new PointCollection(scene.getGL());\n  const text = new TextCollection(scene.getGL());\n  const transitionAnimator = createTransitionAnimator(sceneLayerManager, 60 * 0.2, viewBox);\n\n  // order is important. Pointer events should go after main elements\n  sceneLayerManager.addToLayer(points, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n\n  // Now we are going to listen to events from the subgraph:\n  let pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    getGraph: () => renderCount < MAX_FRAMES && subgraph,\n    getHighlightedLinks,\n    getHighlightedNodes\n  });\n  bus.on('subgraph-focus-node', focusSubgraphNode);\n\n  return {\n    dispose,\n    run\n  };\n\n\n  function focusSubgraphNode(name) {\n    pointerEvents.focusUI(ourNodeNameToUI.get(name));\n  }\n\n  function getHighlightedNodes(ui) {\n    const hlNode = {...ourNodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    subgraph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...ourNodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let linkUIs = [];\n\n    subgraph.forEachLink(link => {\n      let isFirstLevel = (link.fromId === ui.name || link.toId === ui.name);\n      linkUIs.push({\n        from: ourNodeNameToUI.get(link.fromId).position,\n        to: ourNodeNameToUI.get(link.toId).position,\n        color: isFirstLevel ? 0xffffffff : Colors.TERNARY_LINK, \n        isFirstLevel\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function dispose(onSceneIsBack) {\n    cancelAnimationFrame(raf);\n    bus.off('subgraph-focus-node', focusSubgraphNode);\n\n    text.parent.removeChild(text);\n    text.dispose();\n\n    pointerEvents.dispose();\n\n    transitionAnimator.startSceneRestoration(() => {\n      points.parent.removeChild(points);\n      points.dispose();\n      if (onSceneIsBack) onSceneIsBack();\n    }, ourNodeNameToUI, nodeNameToUI, points, onSceneIsBack === undefined);\n    raf = null;\n    scene.renderFrame();\n  }\n\n  function run() {\n    transitionAnimator.startFadeOut();\n    beginLayout();\n    // transitionAnimator.startZoomOut(beginLayout);\n  }\n\n  function beginLayout() {\n    layout = createLayout(subgraph, {\n      timeStep: 80,\n      springLength: 5000,\n      springCoefficient: 1e-5,\n      gravity: -120,\n      nodeMass(nodeId) {\n        let ui = nodeNameToUI.get(nodeId);\n        return ui.size * Math.sqrt(ui.size);\n      }\n    });\n\n    rememberAndSetOriginalPositions();\n    // transitionAnimator.startZoomIn(getBoundingRect(), () => {\n    // });\n    raf = requestAnimationFrame(frame);\n  }\n\n  function frame() {\n    for (let i = 0; i < 10; ++i) layout.step();\n\n    updateNodePositions();\n\n    if (renderCount++ < MAX_FRAMES) {\n      raf = requestAnimationFrame(frame);\n      if (renderCount % 10 === 0) {\n        setProgress(() => ({\n          message: `Layout step ${renderCount} of ${MAX_FRAMES}. Please wait...`\n        }));\n      }\n    } else {\n      finishRendering();\n    }\n\n    scene.setViewBox(getBoundingRect());\n\n    scene.renderFrame();\n  }\n\n  function getRootNodeId() {\n    let root = null;\n    subgraph.forEachNode(node => {\n      if (node.data && node.data.isRoot) {\n        root = node.id;\n        return true;\n      }\n    });\n    if (!root) {\n      throw new Error('Root node is missing in the subgraph');\n    }\n    return root;\n  }\n\n  function finishRendering() {\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      let ui = ourNodeNameToUI.get(node.id);\n      pointerEvents.addNode(ui);\n      text.addText({\n        x,\n        y: y - ui.size * 0.75,\n        text: ui.name,\n        limit: 2. * ui.size,\n        cx: 0.5,\n      });\n    });\n\n    let rootNode = getRootNodeId();\n    pointerEvents.focusUI(ourNodeNameToUI.get(rootNode));\n    setProgress(() => ({\n      subgraphDone: true,\n      subgraphName: rootNode\n    }))\n    // transitionAnimator.startZoomIn(boundingRect);\n  }\n\n  function getBoundingRect() {\n    let boundingRect = {\n      left: Infinity,\n      right: -Infinity,\n      top: Infinity,\n      bottom: -Infinity\n    }\n    subgraph.forEachNode(node => {\n      let {x, y} = layout.getNodePosition(node.id);\n      if (x < boundingRect.left) boundingRect.left = x;\n      if (x > boundingRect.right) boundingRect.right = x;\n      if (y < boundingRect.top) boundingRect.top = y;\n      if (y > boundingRect.bottom) boundingRect.bottom = y;\n    });\n    return boundingRect;\n  }\n\n  function updateNodePositions() {\n    subgraph.forEachNode(node => {\n      let pos = layout.getNodePosition(node.id);\n      let ui = ourNodeNameToUI.get(node.id);\n      ui.position[0] = pos.x;\n      ui.position[1] = pos.y;\n      points.update(ui.id, ui);\n    });\n  }\n\n  function rememberAndSetOriginalPositions() {\n    subgraph.forEachNode(node => {\n      let ui = nodeNameToUI.get(node.id);\n      if (!ui) throw new Error('Missing ui for node: ' + node.id);\n      // let isRoot = node.data && node.data.isRoot;\n      let pos = copyPosition(ui.position);\n      let color = Colors.TERNARY_COLOR;\n      // if (isRoot) color = Colors.PRIMARY_HIGHLIGHT_COLOR;\n      // else if (node.data && node.data.isFirstChild) color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n\n      let ourUI = {\n        position: pos,\n        color,\n        size: ui.size,\n        id: ourNodeNameToUI.size,\n        name: ui.name,\n      };\n      ourNodeNameToUI.set(ui.name, ourUI);\n      points.add(ourUI);\n      layout.setNodePosition(node.id, pos[0], pos[1])\n    });\n  }\n\n}\n\nfunction createTransitionAnimator(sceneLayerManager, durationInFrames, zoomOutViewBox) {\n  let elapsed = 0;\n  let raf;\n  let currentStep;\n  let zoomStart, zoomEnd, changeRectangleFinishedCallback;\n  let doneCallback;\n  let positions, nodeUIs;\n  const scene = sceneLayerManager.getScene();\n\n  return {\n    startZoomOut,\n    startZoomIn,\n    startFadeOut,\n    startSceneRestoration,\n    dispose() {\n      cancelAnimationFrame(raf);\n    }\n  }\n\n  function startZoomOut(cb) {\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    let {width, height, top, left} = zoomOutViewBox;\n    zoomEnd = {\n      top, \n      left,\n      right: left + width,\n      bottom: top + height\n    };\n\n    currentStep = changeRectangle;\n    changeRectangleFinishedCallback = () => {\n      startFadeOut();\n      cb();\n    };\n\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n  }\n\n  function startZoomIn(boundingRect, doneCallback) {\n    currentStep = changeRectangle;\n    elapsed = 0;\n    zoomStart = getCurrentBoundingRectangle();\n    zoomEnd = boundingRect;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    changeRectangleFinishedCallback = null;\n    if (doneCallback) {\n      changeRectangleFinishedCallback = doneCallback;\n    }\n  }\n\n  function getCurrentBoundingRectangle() {\n    let dc = scene.getDrawContext();\n    const {position} = dc.view;\n    let side = position[2] * Math.tan(dc.fov / 2) / dc.pixelRatio;\n    return {\n      left: position[0] - side, \n      right: position[0] + side, \n      top: position[1] - side, \n      bottom: position[1] + side\n    };\n  }\n\n  function startFadeOut() {\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = 0;\n    });\n    sceneLayerManager.hideNamedGroup(NamedGroups.MainGraph);\n  }\n\n  function startSceneRestoration(done, current, target, nodeCollections, immediate) {\n    if (immediate) {\n      // TODO: this is ugly. Please refactor.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n      sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n        el.opacity = 1;\n      });\n      done();\n      return;\n    }\n    elapsed = 0;\n    currentStep = fadeIn;\n    cancelAnimationFrame(raf);\n    raf = requestAnimationFrame(frame);\n    doneCallback = done;\n\n    nodeUIs = nodeCollections;\n    positions = [];\n    current.forEach((ui, name) => {\n      positions.push({\n        ui,\n        from: copyPosition(ui.position),\n        to: target.get(name).position\n      });\n    })\n  }\n\n  function frame() {\n    if (elapsed >= durationInFrames) {\n      elapsed = durationInFrames;\n      currentStep(1);\n      return;\n    } \n\n    raf = requestAnimationFrame(frame);\n    currentStep(elapsed / durationInFrames);\n    elapsed += 1;\n  }\n\n  function changeRectangle(x) {\n    if (x === 1) {\n      if (changeRectangleFinishedCallback) changeRectangleFinishedCallback();\n      changeRectangleFinishedCallback = null;\n      return;\n    }\n\n    scene.setViewBox({\n      top: lerp(zoomStart.top, zoomEnd.top, x),\n      left: lerp(zoomStart.left, zoomEnd.left, x),\n      right: lerp(zoomStart.right, zoomEnd.right, x),\n      bottom: lerp(zoomStart.bottom, zoomEnd.bottom, x)\n    });\n    scene.renderFrame();\n  }\n\n  function lerp(from, to, t) {\n    return to * t + from * (1 - t);\n  }\n\n  function fadeIn(x) {\n    if (x === 0) {\n      // we we just start - let's bring back all nodes from original scene\n      // Their opacity is 0.\n      sceneLayerManager.restoreNamedGroup(NamedGroups.MainGraph);\n    }\n    // we will be changing opacity back to normal:\n    let opacity = Easing.easeInQuart(x);\n    sceneLayerManager.getNamedGroup(NamedGroups.MainGraph).elements.forEach(el => {\n      el.opacity = opacity;\n    });\n    positions.forEach(node => {\n      let ui = node.ui;\n      ui.position[0] = lerp(node.from[0], node.to[0], x);\n      ui.position[1] = lerp(node.from[1], node.to[1], x);\n      nodeUIs.update(ui.id, ui);\n    });\n    sceneLayerManager.getScene().renderFrame();\n\n    if (x === 1 && doneCallback) {\n      // all is done, let's notify the client\n      doneCallback();\n    }\n  }\n}\n\nfunction copyPosition(pos) {\n  return [pos[0], pos[1], pos[2]];\n}","export default function createSceneLayerManager(scene) {\n  // Allows clients to hide/restore multiple elements at once:\n  const namedGroups = new Map(); // string -> {elements: Element[], isHidden: Boolean}\n\n  return {\n    addToLayer,\n    addToNamedGroup,\n    hideNamedGroup,\n    restoreNamedGroup,\n    getNamedGroup: (groupName) => namedGroups.get(groupName),\n    getScene: () => scene\n  };\n\n  function restoreNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) throw new Error('No such group: ' + groupName);\n    if (!group.isHidden) return; // already restored\n    group.isHidden = false;\n    group.elements.forEach(element => {\n      // put it back to the previous z-index\n      addToLayer(element, element.layer);\n    });\n  }\n\n  function addToNamedGroup(element, groupName) {\n    let group = namedGroups.get(groupName);\n    if (group === undefined) {\n      group = {\n        elements: [],\n        isHidden: false\n      }\n      namedGroups.set(groupName, group);\n    }\n    // Note: it's your responsibility to avoid duplicates\n    group.elements.push(element);\n  }\n\n  function hideNamedGroup(groupName) {\n    let group = namedGroups.get(groupName);\n    if (!group) {\n      throw new Error('No group with such name: ' + groupName);\n    }\n\n    if (group.isHidden) return; // already hidden;\n    group.isHidden = true;\n    group.elements.forEach(element => {\n      if (element.parent) element.parent.removeChild(element);\n    });\n  }\n\n  function addToLayer(element, layerIndex) {\n    element.layer = layerIndex\n    let rootElement = scene.getRoot();\n    let lastElementWithLowerLayerIndex = null;\n    rootElement.children.forEach(el => {\n      let layer = el.layer;\n      if (layer === undefined) {\n        // z-index may not be correct!\n        console.warn('Scene element without layer index', layer);\n        layer = 0;\n      }\n      if (layer <= layerIndex) {\n        lastElementWithLowerLayerIndex = el;\n      }\n    });\n    if (lastElementWithLowerLayerIndex) {\n      rootElement.insertChildAfter(element, lastElementWithLowerLayerIndex);\n    } else {\n      // none of the existing layers is lower than our own layer index,\n      // send us to the very back:\n      rootElement.appendChild(element, /* sendToBack */ true);\n    }\n  }\n}","import { createScene } from 'w-gl';\nimport createSVGLoader from './createSVGLoader';\nimport {getPointsFromPathData, getElementFillColor} from 'streaming-svg-parser';\nimport PointCollection from './PointCollection';\nimport PolyLineCollection from './PolyLineCollection';\nimport TextCollection from './MSDFTextCollection';\nimport bus, {setProgress} from './bus';\nimport createFuzzySearcher from './createFuzzySearcher';\nimport {debounce, formatNumber} from './utils'\nimport appState from '../appState';\nimport createGraph from 'ngraph.graph';\nimport createSubgraphVisualizer from './createSubgraphVisualizer';\nimport createPointerEventsHandler from './createPointerEventsHandler';\nimport createSceneLayerManager from './createSceneLayerManager';\nimport {Colors, LayerLevels, NamedGroups} from './constants';\n\nexport default function createStreamingSVGRenderer(canvas) {\n  let ignoreSVGViewBox = false;\n  let scene = initScene();\n  let fuzzySearcher = createFuzzySearcher();\n  window.fuzzySearcher = fuzzySearcher; // TODO: Don't use window.\n\n  let persistedName = appState.query;\n  let nodes = new PointCollection(scene.getGL());\n  let boundariesFill = new PolyLineCollection(scene.getGL(), {color: 0x124182a4, opacity: 1.0});\n\n  let text = new TextCollection(scene.getGL());\n  let loader;\n  let viewBox;\n  let currentTransform = createTransformParser();\n  let positions = [];\n\n  const nodeNameToUI = new Map();\n  const nodesByComponent = new Map();\n  const complimentaryColor = new Map();\n  const clusterColors = new Map();\n\n  const setProgressDebounced = debounce(setProgress, 100, window);\n  let subgraphVisualizer;\n  const sceneLayerManager = createSceneLayerManager(scene);\n\n  sceneLayerManager.addToLayer(boundariesFill, LayerLevels.Polygons);\n  sceneLayerManager.addToLayer(nodes, LayerLevels.Nodes);\n  sceneLayerManager.addToLayer(text, LayerLevels.Text);\n\n  sceneLayerManager.addToNamedGroup(boundariesFill, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(nodes, NamedGroups.MainGraph);\n  sceneLayerManager.addToNamedGroup(text, NamedGroups.MainGraph);\n\n  // This is our bread and butter for touch/mouse event handling\n  const pointerEvents = createPointerEventsHandler(sceneLayerManager, {\n    elementsGroupName: NamedGroups.MainGraph,\n    onTransform: () => {\n      // we don't want to update the query string when subgraph is active\n      if (subgraphVisualizer) return;\n\n      appState.saveScenePosition(scene);\n    },\n    getGraph: () => loader && loader.getGraph(),\n    getHighlightedNodes,\n    getHighlightedLinks,\n  });\n\n  bus.on('focus-node', focusNode);\n  bus.on('unfocus', unfocus);\n  bus.on('exit-subgraph', exitSubgraphMode);\n\n  return {\n    loadSVG,\n    focus() {\n      canvas.focus();\n    },\n    dispose,\n    showRelated,\n    getScene() {\n      return scene;\n    },\n  };\n\n  function getHighlightedNodes(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    const neighbors = nodesByComponent.get(ui.componentId);\n    const hlNode = {...nodeNameToUI.get(ui.name)};\n    hlNode.color = Colors.PRIMARY_HIGHLIGHT_COLOR ;\n    let nodeUIs = [hlNode];\n    graph.forEachLinkedNode(ui.name, (other) => {\n      const hlNode = {...nodeNameToUI.get(other.id)};\n      hlNode.color = Colors.SECONDARY_HIGHLIGHT_COLOR;\n      nodeUIs.push(hlNode);\n      if (!neighbors.has(other.id)) return;\n    });\n\n    return nodeUIs;\n  }\n\n  function getHighlightedLinks(ui) {\n    let graph = loader && loader.getGraph();\n    if (!graph) return [];\n\n    let maxLinks = 10;\n    let neighbors = nodesByComponent.get(ui.componentId);\n    let secondaryLinkColor = complimentaryColor.get(ui.componentId);\n    let idx;\n    let linkUIs = [];\n\n    neighbors.forEach((neighborId) => {\n      idx = 0;\n      graph.forEachLinkedNode(neighborId, (other) => {\n        if (!neighbors.has(other.id)) return;\n        let isFirstLevel = neighborId === ui.name || other.id === ui.name;\n        if (idx > maxLinks && !isFirstLevel) return;\n        linkUIs.push({\n          from: nodeNameToUI.get(neighborId).position,\n          to: nodeNameToUI.get(other.id).position,\n          color: isFirstLevel ? 0xffffffff : secondaryLinkColor, \n          isFirstLevel\n        });\n        idx += 1;\n      });\n    });\n\n    return linkUIs;\n  }\n\n  function showRelated(subreddit) {\n    let subgraph = createGraph();\n    subgraph.addNode(subreddit, {isRoot: true});\n\n    let graph = loader.getGraph();\n    let subgraphNodes = new Set();\n    addNeighbors(subreddit, subgraphNodes);\n\n    Array.from(subgraphNodes).forEach(node => {\n      addNeighbors(node, subgraphNodes);\n    });\n\n    subgraphNodes.forEach(node => {\n      let addedNode = subgraph.getNode(node);\n      if (!addedNode || !addedNode.data) {\n        let isFirstChild = graph.hasLink(node, subreddit) || graph.hasLink(subgraph, node);\n        subgraph.addNode(node, {isFirstChild});\n      }\n\n      graph.forEachLinkedNode(node, (otherNode, link) => {\n        if (!subgraphNodes.has(otherNode.id)) return;\n        if (subgraph.hasLink(link.fromId, link.toId)) return;\n\n        let isRootLevel = (link.fromId === subreddit) || (link.toId === subreddit);\n        subgraph.addLink(link.fromId, link.toId, {isRootLevel});\n      });\n    });\n\n    pointerEvents.setPaused(true); // let the subgraph to handle the events\n    if (subgraphVisualizer) {\n      // we don't want any animation here. Dispose right away!\n      subgraphVisualizer.dispose();\n      subgraphVisualizer = null;\n    } \n    runSubGraphVisualizer();\n\n    function addNeighbors(node, neighborsSet) {\n      graph.forEachLinkedNode(node, otherNode => {\n        neighborsSet.add(otherNode.id);\n      });\n    }\n\n    function runSubGraphVisualizer() {\n      subgraphVisualizer = createSubgraphVisualizer(subgraph, viewBox, sceneLayerManager, nodeNameToUI)\n      subgraphVisualizer.run();\n    }\n  }\n\n  function dispose() {\n    if (loader) loader.dispose();\n    bus.off('focus-node', focusNode);\n    bus.off('unfocus', unfocus);\n    bus.off('exit-subgraph', exitSubgraphMode);\n\n    pointerEvents.dispose();\n    scene.dispose();\n  }\n\n  function focusNode(nodeName) {\n    // this means they entered something in the search box\n    let ui = nodeNameToUI.get(nodeName);\n    if (!ui) return;\n\n    let [cx, cy] = ui.position;\n    let size = (ui.size || 10) * 2;\n    scene.setViewBox({\n      left: cx - size,\n      top: cy - size,\n      right: cx + size,\n      bottom: cy + size,\n    });\n\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // we take care of the events now\n      });\n      subgraphVisualizer = null;\n    }\n\n    pointerEvents.focusUI(ui);\n    scene.renderFrame();\n  }\n\n  function unfocus() {\n    // This means they closed the sidebar\n    pointerEvents.clearHighlights();\n\n    scene.renderFrame();\n  }\n\n  function exitSubgraphMode() {\n    if (subgraphVisualizer) {\n      subgraphVisualizer.dispose(() => {\n        pointerEvents.setPaused(false); // take care of the events now\n      });\n      subgraphVisualizer = null;\n    }\n  }\n\n  function loadSVG(path) {\n    if (loader) loader.dispose();\n\n    loader = createSVGLoader(path)\n      .on('element-start', handleElementStart)\n      .on('element-end', handleElementEnd)\n      .load();\n  }\n\n  function handleElementStart(element) {\n    // TODO: this would be better done with FSM\n    if (element.tagName === 'svg') {\n      let viewBoxArr = (element.attributes.get('viewBox') || '0 0 1024 1024')\n        .split(' ')\n        .map((x) => Number.parseFloat(x))\n        .filter(finiteNumber);\n\n      if (viewBoxArr.length !== 4) throw new Error('Unknown viewBox definition: ' + element.attributes.get('viewBox'));\n\n      viewBox = {\n        left: viewBoxArr[0],\n        top: viewBoxArr[1],\n        width: viewBoxArr[2],\n        height: viewBoxArr[3],\n      };\n\n      if (!ignoreSVGViewBox) {\n        scene.setViewBox({\n          left: viewBox.left,\n          top: viewBox.top,\n          right: viewBox.left + viewBox.width,\n          bottom: viewBox.top + viewBox.height,\n        });\n      }\n    } else if (element.tagName === 'path') {\n      addBorder(element);\n    } else if (element.tagName === 'circle') {\n      addNode(element);\n    } else {\n      let transform = element.attributes.get('transform');\n      if (transform) currentTransform.pushTransform(transform);\n    }\n  }\n\n  function handleElementEnd(element) {\n    let transform = element.attributes.get('transform');\n    if (transform) currentTransform.popTransform(transform);\n  }\n\n  function addNode(el) {\n    let x = getNumericAttribute(el, 'cx');\n    let y = transformY(getNumericAttribute(el, 'cy'));\n    let r = getNumericAttribute(el, 'r');\n    let nodeName = getTextAttribute(el, 'id');\n    if (nodeName[0] === '_') nodeName = nodeName.substr(1);\n    if (nodeNameToUI.has(nodeName)) {\n      throw new Error('Duplicate node name ' + nodeName);\n    }\n    let componentId = getTextAttribute(el.parent, 'id');\n    let neighbors = nodesByComponent.get(componentId);\n    if (!neighbors) {\n      neighbors = new Set();\n      nodesByComponent.set(componentId, neighbors);\n    }\n    neighbors.add(nodeName);\n\n    let position = currentTransform.transform(x, y);\n    let ui = {\n      componentId,\n      position,\n      color: 0xdcdcdcff,\n      size: r * 2,\n      id: positions.length,\n      name: nodeName,\n    };\n    nodeNameToUI.set(nodeName, ui);\n    positions.push(ui);\n    pointerEvents.addNode(ui);\n    nodes.add(ui);\n\n    text.addText({\n      x: position[0],\n      y: position[1] - r,\n      text: nodeName,\n      limit: 3.14 * r,\n      cx: 0.5,\n    });\n    fuzzySearcher.addWord(nodeName);\n\n    setProgressDebounced(getLoadedSubreddits);\n    scene.renderFrame();\n    if (persistedName && nodeName === persistedName && appState.query === persistedName && !appState.userTypedSomething) {\n      bus.fire('show-subreddit', nodeName);\n    }\n  }\n\n  function getLoadedSubreddits() {\n    return {\n      message: 'Loaded ' + formatNumber(nodeNameToUI.size) + ' subreddits...'\n    };\n  }\n\n  function transformY(y) {\n    return viewBox.height + viewBox.top - y;\n  }\n\n  function addBorder(el) {\n    let { points, color } = parseBorder(el);\n    boundariesFill.addPolygon({ polygon: points, color: color });\n    let clusterId = el.attributes.get('id').substr(1);\n    clusterColors.set(clusterId, color)\n    complimentaryColor.set(clusterId, getComplimentaryColor(color));\n    scene.renderFrame();\n  }\n\n  function getComplimentaryColor(color, lightningFactor = 1.4, alpha = 0xaa) {\n    let r = (color >> 24) & 0xff;\n    let g = (color >> 16) & 0xff;\n    let b = (color >> 8) & 0xff;\n    let [h, s, l] = rgbToHsl(r, g, b);\n    if (l > 0.5) lightningFactor = .8;\n    let [r0, g0, b0] = hslToRgb(h, s, Math.min(1, l * lightningFactor));\n    // let r0 = Math.max(r, b, g) + Math.min(r,b,g) - r;\n    // let b0 = Math.max(r, b, g) + Math.min(r,b,g) - b;\n    // let g0 = Math.max(r, b, g) + Math.min(r,b,g) - g;\n    return (r0 << 24) | (g0 << 16) | (b0 << 8) | alpha;\n  }\nfunction rgbToHsl(r, g, b) {\n  r /= 255, g /= 255, b /= 255;\n\n  var max = Math.max(r, g, b), min = Math.min(r, g, b);\n  var h, s, l = (max + min) / 2;\n\n  if (max == min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n      case g: h = (b - r) / d + 2; break;\n      case b: h = (r - g) / d + 4; break;\n    }\n\n    h /= 6;\n  }\n\n  return [ h, s, l ];\n}\n\nfunction hslToRgb(h, s, l) {\n  var r, g, b;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n\n    r = hue2rgb(p, q, h + 1/3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1/3);\n  }\n\n  return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1/6) return p + (q - p) * 6 * t;\n      if (t < 1/2) return q;\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    }\n}\n\n  function initScene() {\n    let scene = createScene(canvas, { \n      allowPinchRotation: false,\n      maxZoom: 1500000,\n      minZoom: 50\n    });\n\n    scene.setClearColor(0x0f / 255, 0x0f / 255, 0x0f / 255, 1);\n\n    let cameraPosition = appState.getCameraPosition();\n    if (cameraPosition) {\n      // This is a bit fragile, but it works:\n      let position = scene.getDrawContext().view.position;\n      position[0] = cameraPosition[0];\n      position[1] = cameraPosition[1];\n      position[2] = cameraPosition[2];\n      scene.getCamera().setViewBox();\n      ignoreSVGViewBox = true;\n    } else {\n      let initialSceneSize = 500;\n      scene.setViewBox({\n        left: -initialSceneSize,\n        top: -initialSceneSize,\n        right: initialSceneSize,\n        bottom: initialSceneSize,\n      });\n    }\n    return scene;\n  }\n\n  function parseBorder(el) {\n    let points = getPointsFromPathData(el.attributes.get('d')).map(([x, y]) => {\n      let [x0, y0] = currentTransform.transform(x, transformY(y));\n      return [x0, y0];\n    });\n    let color = hexColor(getElementFillColor(el));\n    return { points, color };\n  }\n}\n\nfunction createTransformParser() {\n  let isDirty = false;\n  let tx = 0,\n    ty = 0;\n  let transformStack = [];\n\n  return {\n    pushTransform,\n    popTransform,\n    transform,\n  };\n\n  function pushTransform(transformStr) {\n    isDirty = true;\n    transformStack.push(parseTransform(transformStr));\n  }\n\n  function popTransform() {\n    if (transformStack.length === 0) throw new Error('Nothing to pop');\n    transformStack.pop();\n    isDirty = true;\n  }\n\n  function parseTransform(str) {\n    let transformNumbers = str.match(/matrix\\((.+)\\)$/i);\n    if (!transformNumbers)\n      throw new Error('Unknown transformation record: ' + str);\n    let coefficients = transformNumbers[1]\n      .split(',')\n      .map((x) => Number.parseFloat(x))\n      .filter(finiteNumber);\n    if (coefficients.length !== 6)\n      throw new Error('Only matrix(a,b,c,d,e,f) is supported at the moment');\n    return coefficients;\n  }\n\n  function transform(x, y) {\n    updateTransform();\n    return [x + tx, y - ty, 0];\n  }\n\n  function updateTransform() {\n    if (!isDirty) return;\n\n    // TODO: this should be real math\n    tx = 0;\n    ty = 0;\n    transformStack.forEach((record) => {\n      tx += record[4];\n      ty += record[5];\n    });\n    isDirty = false;\n  }\n}\n\nfunction finiteNumber(x) {\n  return Number.isFinite(x);\n}\nfunction getNumericAttribute(el, name) {\n  let value = Number.parseFloat(el.attributes.get(name));\n  if (!Number.isFinite(value))\n    throw new Error(\n      'Element ' +\n        el.tagName +\n        ' does not have a finite numeric attribute ' +\n        name\n    );\n  return value;\n}\n\nfunction getTextAttribute(el, name) {\n  return el.attributes.get(name) || '';\n}\n\nfunction hexColor(rgbArray) {\n  return (rgbArray[0] << 24) | (rgbArray[1] << 16) | (rgbArray[2] << 8) | 0xff;\n}\n\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" \"+_vm._s(_vm.data.data)+\" \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Based on https://github.com/ElemeFE/element/blob/dev/src/utils/clickoutside.js\n// The MIT License (MIT), Copyright (c) 2016 ElemeFE\nconst nodeList = [];\nconst ctx = '@@clickoutsideContext';\n\nlet startClick;\nlet seed = 0;\n\ndocument.addEventListener('mousedown', e => (startClick = e));\ndocument.addEventListener('mouseup', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\n// Also hide when tapped outside.\ndocument.addEventListener('touchstart', e => {\n  startClick = e;\n});\ndocument.addEventListener('touchend', e => {\n  nodeList.forEach(node => node[ctx].documentHandler(e, startClick));\n});\n\nfunction createDocumentHandler(el, binding, vnode) {\n\n  return function(mouseup = {}, mousedown = {}) {\n    if (!vnode || !vnode.context ||\n      !mouseup.target || !mousedown.target ||\n      el.contains(mouseup.target) ||\n      el.contains(mousedown.target) ||\n      el === mouseup.target ||\n      (vnode.context.popperElm &&\n      (vnode.context.popperElm.contains(mouseup.target) ||\n      vnode.context.popperElm.contains(mousedown.target)))) return;\n\n    const methodName = el[ctx].methodName;\n    if (binding.expression && methodName && vnode.context[methodName]) {\n      vnode.context[methodName]();\n    } else {\n      el[ctx].bindingFn && el[ctx].bindingFn();\n    }\n  };\n}\n\nexport default {\n  bind(el, binding, vnode) {\n    nodeList.push(el);\n    const id = seed++;\n    el[ctx] = {\n      id,\n      documentHandler: createDocumentHandler(el, binding, vnode),\n      methodName: binding.expression,\n      bindingFn: binding.value\n    };\n  },\n\n  update(el, binding, vnode) {\n    el[ctx].documentHandler = createDocumentHandler(el, binding, vnode);\n    el[ctx].methodName = binding.expression;\n    el[ctx].bindingFn = binding.value;\n  },\n\n  unbind(el) {\n    let len = nodeList.length;\n\n    for (let i = 0; i < len; i++) {\n      if (nodeList[i][ctx].id === el[ctx].id) {\n        nodeList.splice(i, 1);\n        break;\n      }\n    }\n    delete el[ctx];\n  }\n};","\n<template>\n<div>\n  {{data.data}}\n</div>\n</template>\n<script>\n\nexport default {\n  props: ['data'],\n  data() {\n    return {}\n  },\n  methods: {\n  }\n}\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tooltip.vue?vue&type=template&id=552f3579&\"\nimport script from \"./Tooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./Tooltip.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.hideSuggestions),expression:\"hideSuggestions\"}],staticClass:\"ak-typeahead\"},[_c('a',{staticClass:\"menu-opener\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.menuClicked($event)}}},[_c('svg',{staticClass:\"feather feather-info\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"16\",\"x2\":\"12\",\"y2\":\"12\"}}),_c('line',{attrs:{\"x1\":\"12\",\"y1\":\"8\",\"x2\":\"12.01\",\"y2\":\"8\"}})])]),_c('input',{ref:\"input\",attrs:{\"autofocus\":\"\",\"autocomplete\":\"off\",\"autocorrect\":\"off\",\"autocapitalize\":\"off\",\"spellcheck\":\"false\",\"placeholder\":_vm.placeholder},domProps:{\"value\":_vm.currentQuery},on:{\"input\":_vm.handleInput,\"keydown\":_vm.cycleTheList}}),(_vm.currentQuery || _vm.showClearButton)?_c('a',{staticClass:\"search-submit\",attrs:{\"type\":\"submit\",\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.clearSearch($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]):_vm._e(),(_vm.showSuggestions)?_c('ul',{staticClass:\"suggestions\"},_vm._l((_vm.suggestions),function(suggestion,index){return _c('li',{key:index},[_c('a',{staticClass:\"suggestion\",class:{selected: suggestion.selected},attrs:{\"href\":\"#\"},domProps:{\"innerHTML\":_vm._s(suggestion.html)},on:{\"click\":function($event){$event.preventDefault();return _vm.pickSuggestion(suggestion)}}})])}),0):_vm._e(),(_vm.showLoading)?_c('ul',{staticClass:\"suggestions\"},[_c('li',{staticClass:\"searching\"},[(!_vm.loadingError)?_c('span',[_vm._v(\"Searching...\")]):_vm._e(),(_vm.loadingError)?_c('div',{staticClass:\"loading-error\"},[_c('div',[_vm._v(\"Failed to get reddit completions:\")]),_c('pre',[_vm._v(_vm._s(_vm.loadingError))])]):_vm._e()])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class='ak-typeahead' v-click-outside='hideSuggestions'>\n    <a href=\"#\" class='menu-opener' @click.prevent='menuClicked'>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-info\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"12\" y1=\"16\" x2=\"12\" y2=\"12\"></line><line x1=\"12\" y1=\"8\" x2=\"12.01\" y2=\"8\"></line></svg>\n  </a>\n    <input\n      ref='input' autofocus\n      autocomplete='off'\n      autocorrect='off'\n      autocapitalize='off'\n      spellcheck='false'\n      :value='currentQuery' \n      :placeholder='placeholder'\n      @input='handleInput'\n      @keydown=\"cycleTheList\"\n    >\n    <a\n      type='submit'\n      class='search-submit'\n      href='#'\n      @click.prevent='clearSearch'\n      v-if='currentQuery || showClearButton'\n    >\n<!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\">\n  <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n    <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n    <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n  </svg>\n</a>\n    <ul v-if=\"showSuggestions\" class=\"suggestions\">\n      <li v-for=\"(suggestion, index) in suggestions\" :key=\"index\">\n        <a\n          @click.prevent=\"pickSuggestion(suggestion)\"\n          class=\"suggestion\"\n          :class=\"{selected: suggestion.selected}\"\n          href=\"#\"\n          v-html=\"suggestion.html\"\n        ></a>\n      </li>\n    </ul>\n\n    <ul v-if=\"showLoading\" class=\"suggestions\">\n      <li class=\"searching\">\n        <span v-if=\"!loadingError\">Searching...</span>\n        <div v-if=\"loadingError\" class=\"loading-error\">\n          <div>Failed to get reddit completions:</div>\n          <pre>{{loadingError}}</pre>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport ClickOutside from '../lib/clickOutside.js'\n\nexport default {\n  directives: { ClickOutside },\n  props: {\n    placeholder: {\n      default: \"Type here\"\n    },\n    showClearButton: {\n      default: false\n    },\n    query: {\n      default: \"\"\n    },\n    delay: {\n      default: 80\n    }\n  },\n  data() {\n    return {\n      currentSelected: -1,\n      showSuggestions: false,\n      showLoading: false,\n      loadingError: null,\n      suggestions: [],\n      currentQuery: this.query\n    };\n  },\n  watch: {\n    query(newQuery) {\n      this.currentQuery = newQuery;\n    }\n  },\n  methods: {\n    refresh() {\n      if (this.showSuggestions) this.getSuggestionsInternal();\n    },\n\n    menuClicked() {\n      this.$emit('menuClicked');\n    },\n\n    hideSuggestions() {\n      this.showSuggestions = false;\n      this.showLoading = false;\n      this.pendingKeyToShow = true;\n    },\n\n    showIfNeeded(visible) {\n      // we need to wait until next key press before we can show suggestion.\n      // This avoids race conditions between search results and form submission\n      if (!this.pendingKeyToShow) this.showSuggestions = visible;\n    },\n\n    focus() {\n      this.$refs.input.focus();\n    },\n\n    pickSuggestion(suggestion) {\n      this.currentQuery = suggestion.text;\n      this.hideSuggestions();\n      this.$emit(\"selected\", this.currentQuery);\n    },\n\n    clearSearch() {\n      let payload = {shouldProceed: true};\n      this.$emit('beforeClear', payload);\n      if (!payload.shouldProceed) return;\n\n      this.currentQuery = '';\n      this.getSuggestionsInternal();\n      // this.focus();\n      this.$emit(\"cleared\");\n    },\n\n    handleInput(event) {\n      this.currentQuery = event.target.value;\n      this.$emit('inputChanged');\n      this.getSuggestionsInternal();\n    },\n\n    getSuggestionsInternal() {\n      var self = this;\n      if (self.previous) {\n        window.clearTimeout(self.previous);\n        self.previous = null;\n      }\n      if (!self.currentQuery) {\n        this.showSuggestions = false;\n        return;\n      }\n\n      self.previous = window.setTimeout(function() {\n        var p = window.fuzzySearcher.find(self.currentQuery);\n\n        if (Array.isArray(p)) {\n          self.suggestions = p.map(x => ({\n            selected: false,\n            text: x.text,\n            html: x.html\n          }));\n          self.currentSelected = -1;\n          self.showIfNeeded(p && p.length > 0);\n        } else if (p) {\n          self.loadingError = null;\n          // self.showLoading = true;\n          p.then(\n            function(suggestions) {\n              self.showLoading = false;\n              suggestions = suggestions || [];\n              self.suggestions = suggestions.map(x => ({\n                selected: false,\n                text: x.text,\n                html: x.html\n              }));\n              self.currentSelected = -1;\n              self.showIfNeeded(suggestions && suggestions.length > 0);\n            },\n            function(err) {\n              self.loadingError = err;\n            }\n          );\n        } else {\n          throw new Error(\"Could not parse suggestions response\");\n        }\n      }, self.delay);\n    },\n\n    cycleTheList(e) {\n      var items = this.suggestions;\n      var currentSelected = this.currentSelected;\n      // Any key is alright for the suggestions\n      this.pendingKeyToShow = false;\n\n      let dx;\n      if (e.which === 38) {\n        // UP\n        dx = -1;\n      } else if (e.which === 40) {\n        // down\n        dx = 1;\n      } else if (e.which === 13) {\n        // Enter === accept\n        if (items[currentSelected]) {\n          this.pickSuggestion(items[currentSelected]);\n        } else {\n          this.pickSuggestion({ text: this.currentQuery });\n        }\n        e.preventDefault();\n        return;\n      } else if (e.which === 27) {\n        // Esc === close\n        this.hideSuggestions();\n      }\n\n      if (!dx || items.length === 0) return;\n\n      e.preventDefault();\n\n      if (currentSelected >= 0) {\n        this.suggestions[currentSelected].selected = false;\n      }\n      currentSelected += dx;\n      if (currentSelected < 0) currentSelected = items.length - 1;\n      if (currentSelected >= items.length) currentSelected = 0;\n\n      this.suggestions[currentSelected].selected = true;\n      this.currentSelected = currentSelected;\n    }\n  }\n};\n</script>\n\n<style lang='stylus'>\n@import '../vars.styl';\n\n.ak-typeahead {\n  height: 100%;\n  flex: 1;\n  display: flex;\n  flex-direction: row;\n  align-items: stretch;\n\n  input::-ms-clear {\n    display: none;\n  }\n}\n\n  .menu-opener {\n    display: flex;\n    align-items: center;\n    padding: 0 8px;\n    background: background-color;\n    &:hover, &:focus {\n      color: primary-color;\n      background: highlight-color;\n    }\n  }\n\n.search-submit {\n  color: border-hover;\n  position: absolute;\n  right: 0;\n  top: 0;\n  height: 100%;\n  align-items: center;\n  text-decoration: none;\n  display: flex;\n  flex-shrink: 0;\n  width: 48px;\n  justify-content: center;\n  outline: none;\n\n  &:hover, &:focus {\n    color: primary-color;\n    background: highlight-color;\n  }\n}\n\n.suggestion {\n  display: block;\n  width: 100%;\n  height: 28px;\n  display: flex;\n  align-items: center;\n  padding-left: 10px;\n  text-decoration: none;\n  font-weight: bold;\n  color: primary-text;\n\n  b {\n    font-weight: normal;\n  }\n}\n\n.suggestion:hover, .suggestion.selected {\n  background-color: highlight-color;\n  color: primary-color;\n}\n\n.suggestions {\n  position: absolute;\n  top: 48px;\n  width: 100%;\n  padding: 0;\n  background: white;\n  list-style-type: none;\n  margin: 0;\n  border-top: 1px solid $border-color;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n\n  .searching {\n    margin: 8px;\n  }\n\n  .loading-error {\n    pre {\n      color: orangered;\n      overflow-x: auto;\n      padding-bottom: 14px;\n    }\n  }\n}\n\ninput {\n  height: 100%;\n  width: 100%;\n  padding-left: 10px;\n  font-size: 18px;\n  border: 0;\n  border-radius: 0;\n}\n\ninput:focus {\n  outline: none;\n}\n\ninput::placeholder {\n  color: $hint-text;\n}\n\n@media (max-width: small-screen-width) {\n  .suggestion {\n    height: 42px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Typeahead.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Typeahead.vue?vue&type=template&id=13269c5b&\"\nimport script from \"./Typeahead.vue?vue&type=script&lang=js&\"\nexport * from \"./Typeahead.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Typeahead.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sidebar\"},[_c('div',{staticClass:\"row\"},[_c('h3',[_vm._v(\"Map of Reddit\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])])]),_vm._m(0)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('p',[_vm._v(\" Each dot is a subreddit. Two dots within the same cluster are usually close to each other if multiple users frequently leave comments on both subreddits. \")]),_c('p',[_vm._v(\" If you find something missing, please feel free to \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"edit the map\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" I spent last couple years developing this website as a hobby project. If you enjoy this work please support it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\" and I promise to not disappoint you with new features :). \")]),_c('p',[_vm._v(\" Please follow me on Twitter to stay in touch: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")]),_vm._v(\". \")]),_c('p',[_vm._v(\" Thank you for your interest and support! \")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"sidebar\">\n    <div class='row'>\n      <h3>Map of Reddit</h3>\n      <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n        <a href='#' @click.prevent='onClose' class='close-btn'>\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n        </a>\n    </div>\n\n    <div class=\"container\">\n      <p>\n        Each dot is a subreddit. Two dots within the same cluster are \n        usually close to each other if multiple users frequently leave comments on both subreddits.\n      </p>\n      <p>\n        If you find something missing, please feel free to <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit' target='_blank' class='accent'>edit the map</a>.\n      </p>\n      <p>\n        I spent last couple years developing this website as a hobby project. If you enjoy\n        this work please support it <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n        <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a> and I promise to not disappoint you\n        with new features :).\n      </p>\n      <p>\n      Please follow me on Twitter  to stay in touch: <a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>.\n      </p>\n      <p>\n        Thank you for your interest and support!\n      </p>\n    </div>\n  </div>\n</template>\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sidebar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sidebar.vue?vue&type=template&id=6b61a779&\"\nimport script from \"./Sidebar.vue?vue&type=script&lang=js&\"\nexport * from \"./Sidebar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h3',[_vm._v(\"Improve this map\")]),_c('a',{staticClass:\"close-btn\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onClose($event)}}},[_c('svg',{staticClass:\"feather feather-x-circle\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}},[_c('circle',{attrs:{\"cx\":\"12\",\"cy\":\"12\",\"r\":\"10\"}}),_c('line',{attrs:{\"x1\":\"15\",\"y1\":\"9\",\"x2\":\"9\",\"y2\":\"15\"}}),_c('line',{attrs:{\"x1\":\"9\",\"y1\":\"9\",\"x2\":\"15\",\"y2\":\"15\"}})])]),_c('p',[_vm._v(\"The entire website is open source. You can contribute in multiple ways:\")]),_vm._m(0),_vm._v(\" Thank you for your support! \"),_c('br'),_vm._v(\" ♥️ Anvaka \")])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\"Support this work \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://www.patreon.com/anvaka\"}},[_vm._v(\"on Patreon\")]),_vm._v(\" or \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/sponsors/anvaka\"}},[_vm._v(\"GitHub\")]),_vm._v(\". There is a lot of things I'd love to improve about this project, but without your support I wouldn't know if I'm moving in the right direction. \")]),_c('li',[_vm._v(\" Add new subreddits or update positions of existing ones if you found an issue. Please follow instructions \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\"If you found a rendering bug - consider reporting it or fixing it \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://github.com/anvaka/map-of-reddit\",\"target\":\"_blank\"}},[_vm._v(\"here\")]),_vm._v(\". \")]),_c('li',[_vm._v(\" Share your suggestions and follow me on Twitter. My direct messages are open: \"),_c('a',{staticClass:\"accent\",attrs:{\"href\":\"https://twitter.com/anvaka\"}},[_vm._v(\"https://twitter.com/anvaka\")])])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h3>Improve this map</h3>\n    <!-- Icon copyright (c) 2013-2017 Cole Bemis: https://github.com/feathericons/feather/blob/master/LICENSE -->\n    <a href='#' @click.prevent='onClose' class='close-btn'>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"feather feather-x-circle\"><circle cx=\"12\" cy=\"12\" r=\"10\"></circle><line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line><line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line></svg>\n    </a>\n    <p>The entire website is open source. You can contribute in multiple ways:</p>\n    <ul>\n      <li>Support this work <a href=\"https://www.patreon.com/anvaka\" class='accent'>on Patreon</a> or\n      <a href=\"https://github.com/sponsors/anvaka\" class='accent'>GitHub</a>. There is a lot of things\n      I'd love to improve about this project, but without your support I wouldn't know if I'm moving\n      in the right direction.\n      </li>\n      <li>\n        Add new subreddits or update positions of existing ones if you found an issue. Please \n        follow instructions  <a href='https://github.com/anvaka/map-of-reddit-data#how-to-add-a-new-subreddit'\n        class='accent' target='_blank'>here</a>.\n      </li>\n      <li>If you found a rendering bug - consider reporting it or fixing it \n        <a href='https://github.com/anvaka/map-of-reddit' class='accent' target='_blank'>here</a>.\n      </li>\n      <li>\n        Share your suggestions and follow me on Twitter. My direct messages are open: \n<a href='https://twitter.com/anvaka' class='accent'>https://twitter.com/anvaka</a>\n      </li>\n    </ul>\n    Thank you for your support! <br/>\n    ♥️ Anvaka\n  </div>\n</template>\n\n<script>\nexport default {\n  mounted() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  },\n  beforeDestroy() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    handleKeyDown(e) {\n      if (e.which === 27 /* ESC */) {\n        this.onClose();\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImproveWindow.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImproveWindow.vue?vue&type=template&id=3ae18630&\"\nimport script from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\nexport * from \"./ImproveWindow.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('a',{staticClass:\"small-preview-container\",attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.showFullPreview($event)}}},[_c('div',{staticClass:\"header\"},[_c('span',[_vm._v(\"r/\"+_vm._s(_vm.name))]),(_vm.details)?_c('span',{staticClass:\"subscribers-count\"},[_vm._v(_vm._s(_vm.details.subscribers)+\" members · \"+_vm._s(_vm.details.active)+\" active\")]):_vm._e()]),(_vm.loading)?_c('loading-icon'):_vm._e(),(_vm.details && _vm.details.image)?_c('img',{staticClass:\"community-icon\",attrs:{\"src\":_vm.details.image.icon}}):_vm._e(),(_vm.details)?_c('div',{staticClass:\"info\"},[_vm._v(_vm._s(_vm.details.description))]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{staticClass:\"loader\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 32 32\",\"width\":\"28\",\"height\":\"28\",\"fill\":\"white\"}},[_c('path',{attrs:{\"opacity\":\".25\",\"d\":\"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4\"}}),_c('path',{attrs:{\"d\":\"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z\"}},[_c('animateTransform',{attrs:{\"attributeName\":\"transform\",\"type\":\"rotate\",\"from\":\"0 16 16\",\"to\":\"360 16 16\",\"dur\":\"0.8s\",\"repeatCount\":\"indefinite\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./LoadingIcon.vue?vue&type=template&id=83262da8&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <a href='#' @click.prevent='showFullPreview' class='small-preview-container'>\n    <div class='header'>\n      <span>r/{{name}}</span>\n      <span v-if='details' class='subscribers-count'>{{details.subscribers}} members · {{details.active}} active</span>\n    </div>\n    <loading-icon v-if='loading'></loading-icon>\n    <img v-if='details && details.image' :src='details.image.icon' class='community-icon'>\n    <div class='info' v-if='details'>{{details.description}}</div>\n    <!-- <div class='thumbnails' v-if='details && details.image'>\n      <img v-if='details.image.banner' :src='details.image.banner' class='banner'>\n      <img :src='details.image.icon' class='community-icon'>\n    </div> -->\n  </a>\n</template>\n<script>\nimport bus from './lib/bus';\nimport LoadingIcon from './LoadingIcon'\nimport {formatNumber} from './lib/utils';\n\nexport default {\n  name: 'SmallPreview',\n  props: ['name'],\n  components: {\n    LoadingIcon\n  },\n  data() {\n    return {\n      loading: true,\n      details: null\n    }\n  },\n  watch: {\n    name() {\n      this.getSubredditInfo();\n    }\n  },\n  mounted() {\n    this.getSubredditInfo();\n  },\n  methods: {\n    showFullPreview() {\n      bus.fire('show-subreddit', this.name, true);\n    },\n    getSubredditInfo() {\n      let fetchedName = this.name;\n      this.details = null;\n      this.loading = true;\n      fetch('https://www.reddit.com/r/' + fetchedName + '/about.json', {mode: 'cors'})\n        .then(x => x.json())\n        .then(x => {\n          if (this.name !== fetchedName) return;\n          let data = x.data;\n          let description = data.public_description;\n          let displayName = data.display_name_prefixed;\n          let subscribers = formatNumber(data.subscribers);\n          let active = formatNumber(data.accounts_active);\n          this.loading = false;\n          let image = null;\n          let icon = data.icon_img || data.community_icon;\n          if (icon) {\n            let banner = data.banner_img || data.banner_background_image;\n            image = {\n              icon: icon.split('?')[0],\n              banner: banner ? banner.split('?')[0] : null\n            }\n          }\n          if (data.over18 && !window.ageConfirmed) {\n            image = null;\n          }\n          this.details = {\n            description, displayName, subscribers, active, image\n          }\n        })\n    }\n  }\n};\n</script>\n<style lang=\"stylus\">\ntext-color = #eee;\n.loader {\n  margin: 8px;\n}\n.header {\n  font-size: 16px;\n}\n.small-preview-container {\n  padding: 4px 8px;\n  font-size: 12px;\n  color: text-color;\n  a {\n    color: text-color;\n  }\n}\n.info {\n  margin-top: 4px;\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n.subscribers-count {\n  color: #999999;\n  float: right;\n  display: inline-block;\n  font-size: 12px;\n}\n.community-icon {\n  width: 32px;\n  border-radius: 100%;\n  margin: 8px;\n  float: left;\n}\n.banner {\n  // height: 48px;\n  width: 100%;\n  position: absolute;\n  top: 0px;\n}\n.thumbnails {\n  overflow: hidden;\n  position: absolute;\n  bottom: 84px;\n  width: 100%;\n  height: 48px;\n  background: orange;\n  left: 0;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SmallPreview.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SmallPreview.vue?vue&type=template&id=7b1a6d47&\"\nimport script from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nexport * from \"./SmallPreview.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SmallPreview.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export default function createFirstInteractionListener(callback) {\n  window.addEventListener('mousedown', handleFirstEvent, true);\n  window.addEventListener('wheel', handleFirstEvent, true);\n  window.addEventListener('touchstart', handleFirstEvent, true);\n  window.addEventListener('keydown', handleFirstEvent, true);\n\n  let called = false;\n\n  return dispose;\n\n  function handleFirstEvent() {\n    if (called) return;\n    called = true;\n    callback();\n  }\n\n  function dispose() {\n    window.removeEventListener('mousedown', handleFirstEvent, true);\n    window.removeEventListener('wheel', handleFirstEvent, true);\n    window.removeEventListener('touchstart', handleFirstEvent, true);\n    window.removeEventListener('keydown', handleFirstEvent, true);\n  }\n}","<template>\n  <div id=\"app\">\n    <div v-if='!isWebGLEnabled'>\n      <div class='absolute no-webgl'>\n        <h4>WebGL is not enabled :(</h4>\n        <p>This website needs <a href='https://en.wikipedia.org/wiki/WebGL' class='accent'>WebGL</a> to render a map of reddit.\n        </p> <p>\n        You can try another browser. If the problem persists - very likely your video card isn't supported.\n        </p>\n      </div>\n    </div>\n    <div v-if='isWebGLEnabled'>\n    <transition name='fade'>\n      <div class='progress' v-if='progressMessage'>{{progressMessage}}</div>\n    </transition>\n    <transition name='fade'>\n      <div class='progress subgraph' v-if='subgraphName'>\n        Only <a href='#' class='accent' @click.prevent='onSubgraphRootClick'>/r/{{subgraphName}}</a> related subreddits are shown.\n        <a href='#' class='accent' @click.prevent='onExitSubgraph'>view all</a>\n      </div>\n    </transition>\n    <subreddit v-if=\"subreddit\" :name=\"subreddit\" class=\"preview\" @declineAge='onDeclineAge'>\n      <template slot='after-title'>\n        <div>\n          <a href='#' class='subreddit-action' @click.prevent='showRelated' v-if='graphLoaded'>Show related</a>\n          <span v-if='!graphLoaded' class='subreddit-action'>the map is still loading...</span>\n        </div>\n      </template>\n    </subreddit>\n    <form @submit.prevent=\"onSubmit\" class=\"search-box\">\n      <typeahead\n        placeholder=\"Find subreddit\"\n        @menuClicked='sidebarVisible = true'\n        @selected='findSubreddit'\n        @beforeClear='closeSubredditOnSmallScreen'\n        @cleared='closeSubredditViewer'\n        @inputChanged='onTypeAheadInput'\n        :showClearButton=\"subreddit\"\n        :query=\"appState.query\"\n      ></typeahead>\n    </form>\n    <a href='#' @click.prevent='onImproveClick' class='accent improve'>Improve this map</a>\n    <transition name='slide-bottom'>\n      <small-preview v-if=\"smallPreview\" :name=\"smallPreview\" class=\"small-preview\"></small-preview>\n    </transition>\n\n    <transition name='slide-top'>\n      <improve-window v-if='improveVisible' @close='improveVisible = false' class='improve-window'></improve-window>\n    </transition>\n\n    <tooltip\n      v-if=\"tooltip\"\n      :style=\"{\n      left: tooltip.x + 'px',\n      top: tooltip.y + 'px'\n    }\"\n      :data=\"tooltip\"\n      class=\"tooltip\"\n    ></tooltip>\n\n    <transition name='fade'>\n      <div class='backdrop' v-if='sidebarVisible || improveVisible' @click=\"onBackdropClick\"></div>\n    </transition>\n    <transition name='slide-left'>\n      <sidebar v-if=\"sidebarVisible\" @close='sidebarVisible = false'></sidebar>\n    </transition>\n    </div>\n  </div>\n</template>\n\n<script>\nimport \"vuereddit/dist/vuereddit.css\";\n\nimport createStreamingSVGRenderer from './lib/createStreamingSVGRenderer';\nimport Tooltip from \"./Tooltip\";\nimport Typeahead from \"./components/Typeahead\";\nimport Sidebar from \"./components/Sidebar\";\nimport ImproveWindow from \"./components/ImproveWindow\";\nimport Subreddit from \"vuereddit\";\nimport SmallPreview from \"./SmallPreview\";\nimport appState from \"./appState.js\";\nimport createFirstInteractionListener from './lib/createFirstInteractionListener';\nimport {isWebGLEnabled} from 'w-gl';\n\nimport bus from \"./lib/bus\";\n\nexport default {\n  components: {\n    Tooltip,\n    Typeahead,\n    Subreddit,\n    Sidebar,\n    ImproveWindow,\n    SmallPreview\n  },\n  name: \"app\",\n  methods: {\n    showRelated() {\n      this.scene.showRelated(this.subreddit);\n      if (isSmallScreen()) {\n        // move panel to the bottom\n        this.smallPreview = this.subreddit;\n        this.subreddit = null;\n      }\n    },\n    findSubreddit(q) {\n      appState.query = q;\n      this.onSubmit();\n    },\n    closeSubredditOnSmallScreen(payload) {\n      appState.userTypedSomething = true;\n      if (isSmallScreen() && this.subreddit) {\n        // First time - just close the subreddit, second time - clear all\n        payload.shouldProceed = false;\n        this.subreddit = null;\n        this.scene.focus();\n      } \n    },\n    onTypeAheadInput() {\n      this.typeaheadChanged = true;\n      appState.userTypedSomething = true;\n    },\n    onDeclineAge(e) {\n      e.preventDefault();\n      this.closeSubredditViewer();\n    },\n    onBackdropClick() {\n      this.sidebarVisible = false;\n      this.improveVisible = false;\n    },\n    onImproveClick() {\n      this.improveVisible = true;\n    },\n    closeSubredditViewer() {\n      this.subreddit = null;\n      this.smallPreview = null;\n      appState.query = '';\n      appState.saveQuery(appState.query);\n      bus.fire('unfocus');\n    },\n    showTooltip(e) {\n      if (e) {\n        this.tooltip = e;\n      } else {\n        this.tooltip = null;\n      }\n    },\n    onSubmit() {\n      bus.fire('focus-node', appState.query);\n      appState.saveQuery(appState.query);\n      this.subgraphName = null;\n    },\n    onSubgraphRootClick() {\n      bus.fire('subgraph-focus-node', this.subgraphName);\n    },\n    onExitSubgraph() {\n      bus.fire('exit-subgraph');\n      this.subgraphName = null;\n    },\n    showSubreddit(subreddit, forceFullView) {\n      if (isSmallScreen() && !forceFullView) {\n        this.smallPreview = subreddit;\n      } else {\n        this.smallPreview = null;\n        this.subreddit = subreddit;\n      }\n      appState.query = subreddit;\n      this.tooltip = null;\n      appState.saveQuery(appState.query);\n    },\n\n    setProgress(progress) {\n      if (progress && progress.mapLoaded) {\n        // last message!\n        if (!this.typeaheadChanged) {\n          this.progressMessage = progress.error ? 'Something is likely not right...' : 'Map is ready to use. Please enjoy';\n        }\n        this.graphLoaded = true;\n        this.disposeFirstListener = createFirstInteractionListener(() => {\n          setTimeout(() => this.progressMessage = null, 3000);\n        });\n      } else if (progress && progress.subgraphDone) {\n        this.progressMessage = null;\n        this.subgraphName = progress.subgraphName;\n      } else if (progress) {\n        this.progressMessage = progress.message;\n        this.subgraphVisualized = null;\n      } \n    }\n  },\n  data() {\n    return {\n      improveVisible: false,\n      isWebGLEnabled: false,\n      typeaheadChanged: false,\n      tooltip: null,\n      subgraphName: null,\n      subreddit: null,\n      smallPreview: null,\n      sidebarVisible: false,\n      progressMessage: '',\n      graphLoaded: false,\n      appState,\n    };\n  },\n  mounted() {\n    const canvas = document.getElementById(\"cnv\");\n    this.isWebGLEnabled = isWebGLEnabled(canvas);\n    if (!this.isWebGLEnabled) return;\n\n    let svgRenderer = createStreamingSVGRenderer(canvas);\n    let path = appState.getFilePath();\n    svgRenderer.loadSVG(path);\n    this.scene = svgRenderer;\n\n    bus.on('show-tooltip', this.showTooltip);\n    bus.on('show-subreddit', this.showSubreddit);\n    bus.on('progress', this.setProgress);\n  },\n\n  beforeDestroy() {\n    if (this.scene) {\n      this.scene.dispose();\n    }\n    if (this.disposeFirstListener) {\n      this.disposeFirstListener();\n    }\n    bus.off('show-tooltip', this.showTooltip);\n    bus.off('show-subreddit', this.showSubreddit);\n    bus.off('progress', this.setProgress);\n  }\n};\n\nfunction isSmallScreen() {\n  return window.innerWidth < 550;\n}\n</script>\n\n<style lang='stylus'>\n@import './vars.styl';\n\n#app {\n  position: relative;\n  background: background-color;\n}\n.no-webgl {\n  width: 100%;\n  color: hsla(215, 37%, 55%, 1);\n  flex-direction: column; text-align: center;\n  padding: 12px;\n}\n.no-webgl h4 {\n  margin: 7px 0;\n  font-size: 24px;\n}\n.subreddit .subreddit-action {\n  display: inline-block;\n  border: 1px solid;\n  color: primary-color;\n  border-radius: 3px;\n  padding: 0 8px;\n  margin: 8px;\n}\n\n.subreddit span.subreddit-action {\n  border-color: border-color;\n}\n\n.backdrop {\n  position fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.21);\n}\n\n.close-container {\n  position: fixed;\n  z-index: 2;\n  top: 0;\n  right: 0;\n  height: 40px;\n\n  a {\n    padding: 0 12px;\n    font-size: 12px;\n    color: #fff;\n    background-color: #333;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n  }\n}\n.improve {\n  position: fixed;\n  background: rgba(0, 0, 0, 0.3);\n  padding: 0 8px;\n  font-size: 12px;\n  right: 8px;\n  bottom: 8px;\n}\n\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to {\n  opacity: 0;\n}\n\n.slide-bottom-enter-active, .slide-bottom-leave-active {\n  transition: transform .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-bottom-enter, .slide-bottom-leave-to {\n  transform: translateY(84px);\n}\n\n.small-preview {\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 84px;\n  background: rgba(5, 15, 43, 1); \n  box-shadow: 0 -4px 4px rgba(0,0,0,0.42);\n}\n\n.subreddit.preview {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: side-panel-width + 16px;\n  height: 100vh;\n  overflow: auto;\n}\n\n.row {\n  display: flex;\n  flex-direction: row;\n  align-items: baseline;\n}\n\n.row .label {\n  flex: 1;\n}\n\n.row .value {\n  flex: 1;\n}\n\n.row select {\n  width: 100%;\n}\n\n.btn-command {\n  display: block;\n  padding: 4px;\n  margin-top: 10px;\n  border: 1px solid;\n}\n\n.tooltip {\n  position: fixed;\n  background: post-background;\n  border: 1px solid border-hover;\n  color: primary-color;\n  padding: 8px;\n  pointer-events: none;\n  max-width: 400px;\n  transform: translateY(calc(-100% - 8px));\n  font-family: monospace;\n}\n\n.subreddit {\n  background: panel-background;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);\n  color: highlight-color;\n  .error {\n    color: white;\n    h3 {\n      color: error-color;\n    }\n  }\n  .background-area {\n    background: post-background;\n    border-bottom: 1px solid border-color;\n\n    .community-icon {\n      background: post-background;\n    }\n  }\n  h2, h3 {\n    color: primary-color;\n  }\n  .loading {\n    margin-top: 8px;\n  }\n  .age-warning  {\n    h2 {\n      text-align: center;\n      display: inline-block;\n    }\n  }\n  .error,\n  .age-warning {\n    margin-top: 62px;\n  }\n  a {\n    color: highlight-color;\n  }\n  .post {\n    background: post-background;\n    border: 1px solid border-color;\n    .url {\n      color: inherit;\n    }\n    .title, h1 {\n      color: primary-color;\n    }\n    a.comments-count {\n      &:hover {\n        background: hover-background;\n      }\n    }\n    .post-content, .byline {\n      a:hover {\n        background: hover-background;\n      }\n    }\n    .status-line {\n      background-color: #161617;\n      .vote-count {\n        color: primary-color;\n        background: initial;\n      }\n    }\n    .read-more {\n      background-image: linear-gradient(180deg,hsla(0,0%,100%,0), #171718);\n    }\n    &:hover {\n      border: 1px solid border-hover;\n    }\n  }\n}\n\na {\n  color: highlight-color;\n  text-decoration: none;\n}\n.search-box {\n  position: absolute;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2), 0 -1px 0px rgba(0, 0, 0, 0.02);\n  height: 48px;\n  font-size: 16px;\n  margin-top: 16px;\n  padding: 0;\n  cursor: text;\n  left: 8px;\n  width: side-panel-width;\n}\n\n.progress {\n  position: fixed;\n  top: 0px;\n  left: 50%;\n  transform: translateX(-50%);\n  color: white;\n  padding: 8px;\n  background: rgba(5, 15, 43, 0.4);\n  box-shadow: 0 4px 4px rgba(0,0,0,0.2);\n  user-select: none;\n}\n\n.slide-left-enter-active, .slide-left-leave-active {\n  transition: transform 150ms cubic-bezier(0,0,0.58,1);\n}\n.slide-left-enter, .slide-left-leave-to {\n  transform: translateX(-100%);\n}\n\n.slide-top-enter-active, .slide-top-leave-active {\n  transition: opacity .3s cubic-bezier(0,0,0.58,1);\n}\n.slide-top-enter, .slide-top-leave-to {\n  opacity: 0;\n}\n.improve-window {\n  position: fixed;\n  transform: translate(-50%, -50%);\n  top: 0;\n  left: 50%;\n  top: 50%;\n  width: 400px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  padding: 8px 16px;\n  overflow-y: auto;\n  max-height: 100%;\n  h3 {\n    margin: 0;\n  }\n  .close-btn {\n    position: absolute;\n    right: 8px;\n    top: 8px;\n  }\n}\na.accent {\n  color: highlight-link;\n}\n.sidebar {\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  width: side-panel-width - 10px;\n  background: white;\n  z-index: 2;\n  box-shadow: 0 -1px 24px rgb(0 0 0);\n  display: flex;\n  flex-direction: column;\n\n  h3 {\n    font-weight: normal;\n    margin: 8px 8px 0 8px;\n    font-size: 18px;\n    flex: 1;\n  }\n  .close-btn {\n    align-self: stretch;\n    align-items: center;\n    display: flex;\n    padding: 0 8px;\n  }\n\n  .container {\n    padding: 8px;\n    flex: 1;\n    overflow-y: auto;\n  }\n  h4 {\n    margin: 0;\n    font-weight: normal;\n    text-align: right;\n  }\n  .byline {\n    margin: 0 8px 8px;\n    font-size: 12px;\n  }\n}\n.progress.subgraph {\n  max-width: 400px;\n  text-align: center;\n}\n\n@media (max-width: 1200px) {\n  .progress {\n    top: 16px;\n    right: 8px;\n    left: inherit;\n    transform: inherit;\n  }\n}\n@media (max-width: 810px) {\n  .progress.subgraph {\n    top: 62px;\n    left: 8px;\n  }\n}\n\n@media (max-width: small-screen-width) {\n  #app {\n    width: 100%;\n    margin: 0;\n  }\n  .sidebar {\n    width: 100%;\n  }\n  .search-box {\n    left: 0;\n    margin-top: 0;\n    width: 100%;\n  }\n  .improve-window {\n    width: 100%;\n    height: 100%;\n  }\n  .subreddit.preview {\n    width: 100%;\n  }\n  .progress, .progress.subgraph  {\n    top: 48px;\n    left: 0;\n    color: white;\n    text-align: center;\n    width: 100%;\n    position: absolute;\n    transform: initial;\n    box-shadow: initial;\n  }\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6cb8677c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\n\nVue.config.productionTip = false\n\nnew Vue({\n  render: h => h(App),\n}).$mount('#app')","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=stylus&\""],"sourceRoot":""}